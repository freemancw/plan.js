<HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<body bgcolor="#ffffff">

<center><img src="msl.jpg"></center>

<p>


<!-- Generated by Doxygen 1.2.2 on Wed Aug 29 23:26:43 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>guiplanner.C</h1><a href="guiplanner_C.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------</font>
00002 <font class="comment">//               The Motion Strategy Library (MSL)</font>
00003 <font class="comment">//----------------------------------------------------------------------</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Copyright (c) 1998-2000 Iowa State University and Steve LaValle.  </font>
00006 <font class="comment">// All Rights Reserved.</font>
00007 <font class="comment">// </font>
00008 <font class="comment">// Permission to use, copy, and distribute this software and its </font>
00009 <font class="comment">// documentation is hereby granted free of charge, provided that </font>
00010 <font class="comment">// (1) it is not a component of a commercial product, and </font>
00011 <font class="comment">// (2) this notice appears in all copies of the software and</font>
00012 <font class="comment">//     related documentation. </font>
00013 <font class="comment">// </font>
00014 <font class="comment">// Iowa State University and the author make no representations</font>
00015 <font class="comment">// about the suitability or fitness of this software for any purpose.  </font>
00016 <font class="comment">// It is provided "as is" without express or implied warranty.</font>
00017 <font class="comment">//----------------------------------------------------------------------</font>
00018 
00019 <font class="preprocessor">#include "<a class="code" href="guiplanner_h.html">guiplanner.h</a>"</font>
00020 
00021 
00022 <font class="comment">// *********************************************************************</font>
00023 <font class="comment">// *********************************************************************</font>
00024 <font class="comment">// CLASS:     MSLPlannerWindow</font>
00025 <font class="comment">// </font>
00026 <font class="comment">// *********************************************************************</font>
00027 <font class="comment">// *********************************************************************</font>
00028 
00029 <font class="comment">// Map</font>
<a name="l00030"></a><a class="code" href="guiplanner_C.html#a0">00030</a> <a class="code" href="guiplanner_C.html#a0">FXDEFMAP</a>(<a class="code" href="class_MSLPlannerWindow.html">MSLPlannerWindow</a>) MSLPlannerWindowMap[]={
00031   FXMAPFUNC(SEL_TIMEOUT,FXMainWindow::ID_LAST,MSLPlannerWindow::onCmdTimer),
00032   FXMAPFUNCS(SEL_COMMAND, 20, 300, MSLPlannerWindow::GeneralHandler)
00033 };
00034 
00035 
00036 <font class="comment">// Object implementation</font>
<a name="l00037"></a><a class="code" href="guiplanner_C.html#a1">00037</a> <a class="code" href="guiplanner_C.html#a1">FXIMPLEMENT</a>(<a class="code" href="class_MSLPlannerWindow.html">MSLPlannerWindow</a>,<a class="code" href="class_FXMainWindow.html">FXMainWindow</a>,MSLPlannerWindowMap,ARRAYNUMBER(MSLPlannerWindowMap))
00038   
00039 <font class="comment">// Make some windows</font>
00040 MSLPlannerWindow::MSLPlannerWindow(<a class="code" href="class_GuiPlanner.html">GuiPlanner</a>* gp):<a class="code" href="class_FXMainWindow.html">FXMainWindow</a>(gp,"Motion Strategy Library",NULL,NULL,DECOR_ALL,20,20,500,260) {
00041 
00042   GP = gp;
00043   
00044   <font class="comment">// Make the target connections</font>
00045   Restart();
00046 
00047   <font class="comment">// Menubar</font>
00048   menubar=<font class="keyword">new</font> FXMenubar(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|LAYOUT_FILL_X);
00049   plannermenu = <font class="keyword">new</font> FXMenuPane(<font class="keyword">this</font>);
00050     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRT"</font>,NULL,<font class="keyword">this</font>,201);
00051     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRTGoalBias"</font>,NULL,<font class="keyword">this</font>,202);
00052     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRTCon"</font>,NULL,<font class="keyword">this</font>,204);
00053     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRTDual"</font>,NULL,<font class="keyword">this</font>,205);
00054     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRTExtExt"</font>,NULL,<font class="keyword">this</font>,206);
00055     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRTExtCon"</font>,NULL,<font class="keyword">this</font>,210);
00056     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"RRTConCon"</font>,NULL,<font class="keyword">this</font>,211);
00057     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"PRM"</font>,NULL,<font class="keyword">this</font>,230);
00058     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"FDP"</font>,NULL,<font class="keyword">this</font>,240);
00059     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"FDPStar"</font>,NULL,<font class="keyword">this</font>,241);
00060     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"FDPBestFirst"</font>,NULL,<font class="keyword">this</font>,242);
00061     <font class="keyword">new</font> FXMenuCommand(plannermenu,<font class="stringliteral">"FDPBi"</font>,NULL,<font class="keyword">this</font>,243);
00062   <font class="keyword">new</font> FXMenuTitle(menubar,<font class="stringliteral">"&amp;Planner"</font>,NULL,plannermenu);
00063 
00064   loadmenu=<font class="keyword">new</font> FXMenuPane(<font class="keyword">this</font>);
00065     <font class="keyword">new</font> FXMenuCommand(loadmenu,<font class="stringliteral">"Load Graph(s)"</font>,NULL,<font class="keyword">this</font>,45,0);
00066     <font class="keyword">new</font> FXMenuCommand(loadmenu,<font class="stringliteral">"Load Path"</font>,NULL,<font class="keyword">this</font>,49,0);
00067     <font class="keyword">new</font> FXMenuCommand(loadmenu,<font class="stringliteral">"Load Animation Frames"</font>,NULL,<font class="keyword">this</font>,47,0);
00068   <font class="keyword">new</font> FXMenuTitle(menubar,<font class="stringliteral">"&amp;Load"</font>,NULL,loadmenu);
00069 
00070   savemenu=<font class="keyword">new</font> FXMenuPane(<font class="keyword">this</font>);
00071     <font class="keyword">new</font> FXMenuCommand(savemenu,<font class="stringliteral">"Save Graph(s)"</font>,NULL,<font class="keyword">this</font>,44,0);
00072     <font class="keyword">new</font> FXMenuCommand(savemenu,<font class="stringliteral">"Save Path"</font>,NULL,<font class="keyword">this</font>,48,0);
00073     <font class="keyword">new</font> FXMenuCommand(savemenu,<font class="stringliteral">"Save Animation Frames"</font>,NULL,<font class="keyword">this</font>,46,0);
00074   <font class="keyword">new</font> FXMenuTitle(menubar,<font class="stringliteral">"&amp;Save"</font>,NULL,savemenu);
00075 
00076   plotmenu=<font class="keyword">new</font> FXMenuPane(<font class="keyword">this</font>);
00077     <font class="keyword">new</font> FXMenuCommand(plotmenu,<font class="stringliteral">"Draw 2D Graphs"</font>,NULL,<font class="keyword">this</font>,31,0);
00078   <font class="keyword">new</font> FXMenuTitle(menubar,<font class="stringliteral">"Plo&amp;t"</font>,NULL,plotmenu);
00079 
00080   <font class="keyword">new</font> FXHorizontalSeparator(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|SEPARATOR_GROOVE|LAYOUT_FILL_X);
00081 
00082   <font class="comment">// Buttons</font>
00083   buttonbar=<font class="keyword">new</font> FXMenubar(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|LAYOUT_FILL_X);
00084   <font class="keyword">new</font> FXButton(buttonbar,<font class="stringliteral">"&amp;Construct"</font>,NULL,<font class="keyword">this</font>,22,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00085   <font class="keyword">new</font> FXButton(buttonbar,<font class="stringliteral">"P&amp;lan"</font>,NULL,<font class="keyword">this</font>,23,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00086   <font class="keyword">new</font> FXButton(buttonbar,<font class="stringliteral">"C&amp;lear"</font>,NULL,<font class="keyword">this</font>,24,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00087   <font class="keyword">new</font> FXButton(buttonbar,<font class="stringliteral">"&amp;Quit"</font>,NULL,<font class="keyword">this</font>,51,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00088 
00089   <font class="keyword">new</font> FXHorizontalSeparator(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|SEPARATOR_GROOVE|LAYOUT_FILL_X);
00090   
00091   <font class="keyword">new</font> FXLabel(<font class="keyword">this</font>,<font class="stringliteral">" Planner Controls                                    Animation Controls"</font>,
00092     NULL,LAYOUT_SIDE_TOP|LAYOUT_FILL_X|JUSTIFY_LEFT);
00093     
00094   <font class="keyword">new</font> FXHorizontalSeparator(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|SEPARATOR_GROOVE|LAYOUT_FILL_X);
00095 
00096   vcrbar=<font class="keyword">new</font> FXMenubar(<font class="keyword">this</font>,LAYOUT_SIDE_BOTTOM|LAYOUT_FILL_X);
00097   <font class="keyword">new</font> FXLabel(vcrbar,<font class="stringliteral">"Movie Buttons"</font>,NULL,LAYOUT_SIDE_TOP|LAYOUT_FILL_X|JUSTIFY_LEFT);
00098   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Stop"</font>,NULL,<font class="keyword">this</font>,71,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00099   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Last"</font>,NULL,<font class="keyword">this</font>,76,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00100   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Pause"</font>,NULL,<font class="keyword">this</font>,72,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00101   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Next"</font>,NULL,<font class="keyword">this</font>,77,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00102   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Slower"</font>,NULL,<font class="keyword">this</font>,73,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00103   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Play"</font>,NULL,<font class="keyword">this</font>,70,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00104   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Faster"</font>,NULL,<font class="keyword">this</font>,74,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00105   <font class="keyword">new</font> FXButton(vcrbar,<font class="stringliteral">"Reset"</font>,NULL,<font class="keyword">this</font>,75,FRAME_RAISED|FRAME_THICK|LAYOUT_FILL_X);
00106 
00107   <font class="comment">// Arange nicely</font>
00108   matrix=<font class="keyword">new</font> FXMatrix(<font class="keyword">this</font>,5,MATRIX_BY_COLUMNS|LAYOUT_SIDE_TOP|LAYOUT_FILL_X|LAYOUT_FILL_Y);
00109   
00110   <font class="keyword">new</font> FXLabel(matrix,<font class="stringliteral">"PlannerDeltaT"</font>,NULL,LAYOUT_CENTER_Y|LAYOUT_CENTER_X|JUSTIFY_RIGHT|LAYOUT_FILL_ROW);
00111   <font class="keyword">new</font> FXTextField(matrix,10,&amp;plannerdeltat_target,FXDataTarget::ID_VALUE,TEXTFIELD_REAL|JUSTIFY_RIGHT|LAYOUT_CENTER_Y|LAYOUT_CENTER_X|FRAME_SUNKEN|FRAME_THICK|LAYOUT_FILL_ROW);
00112   <font class="keyword">new</font> FXFrame(matrix,LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW);
00113   <font class="keyword">new</font> FXLabel(matrix,<font class="stringliteral">"AnimationTimeScale"</font>,NULL,LAYOUT_CENTER_Y|LAYOUT_CENTER_X|JUSTIFY_RIGHT|LAYOUT_FILL_ROW);
00114   FXSlider* fsl = <font class="keyword">new</font> FXSlider(matrix,&amp;animationtimescale_target,FXDataTarget::ID_VALUE,LAYOUT_CENTER_Y|LAYOUT_FILL_ROW|LAYOUT_FIX_WIDTH,0,0,100);
00115   fsl-&gt;setRange(1,100);
00116 
00117   <font class="keyword">new</font> FXLabel(matrix,<font class="stringliteral">"NumNodes"</font>,NULL,LAYOUT_CENTER_Y|LAYOUT_CENTER_X|JUSTIFY_RIGHT|LAYOUT_FILL_ROW);
00118   <font class="keyword">new</font> FXTextField(matrix,10,&amp;numnodes_target,FXDataTarget::ID_VALUE,TEXTFIELD_INTEGER|JUSTIFY_RIGHT|LAYOUT_CENTER_Y|LAYOUT_CENTER_X|FRAME_SUNKEN|FRAME_THICK|LAYOUT_FILL_ROW);
00119   <font class="keyword">new</font> FXFrame(matrix,LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW);
00120   <font class="keyword">new</font> FXFrame(matrix,LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW);
00121   <font class="comment">//new FXLabel(matrix,"AmbientLight",NULL,LAYOUT_CENTER_Y|LAYOUT_CENTER_X|JUSTIFY_RIGHT|LAYOUT_FILL_ROW);</font>
00122   <font class="keyword">new</font> FXTextField(matrix,10,&amp;animationtimescale_target,FXDataTarget::ID_VALUE,TEXTFIELD_INTEGER|JUSTIFY_RIGHT|LAYOUT_CENTER_Y|LAYOUT_CENTER_X|FRAME_SUNKEN|FRAME_THICK|LAYOUT_FILL_ROW);
00123   <font class="comment">//new FXSlider(matrix,&amp;ambientlight_target,FXDataTarget::ID_VALUE,LAYOUT_CENTER_Y|LAYOUT_FILL_ROW|LAYOUT_FIX_WIDTH,0,0,100);</font>
00124 
00125   <font class="keyword">new</font> FXLabel(matrix,<font class="stringliteral">"DrawIndexX"</font>,NULL,LAYOUT_CENTER_Y|LAYOUT_CENTER_X|JUSTIFY_RIGHT|LAYOUT_FILL_ROW);
00126   <font class="keyword">new</font> FXTextField(matrix,10,&amp;drawindexx_target,FXDataTarget::ID_VALUE,TEXTFIELD_INTEGER|JUSTIFY_RIGHT|LAYOUT_CENTER_Y|LAYOUT_CENTER_X|FRAME_SUNKEN|FRAME_THICK|LAYOUT_FILL_ROW);
00127   <font class="comment">//  new FXSpinner(matrix,5,&amp;drawindexx_target,0,SPIN_CYCLIC|FRAME_SUNKEN|FRAME_THICK|LAYOUT_CENTER_Y|LAYOUT_FILL_ROW);</font>
00128   <font class="keyword">new</font> FXFrame(matrix,LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW);
00129 
00130   <font class="keyword">new</font> FXToggleButton(matrix,<font class="stringliteral">"Bounding Box OFF"</font>,<font class="stringliteral">"Bounding Box ON"</font>,NULL,NULL,<font class="keyword">this</font>,83,LAYOUT_CENTER_Y|LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW|ICON_BEFORE_TEXT);
00131   <font class="keyword">new</font> FXToggleButton(matrix,<font class="stringliteral">"Multiple Views OFF"</font>,<font class="stringliteral">"Multiple Views ON"</font>,NULL,NULL,<font class="keyword">this</font>,82,LAYOUT_CENTER_Y|LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW|ICON_BEFORE_TEXT);
00132 
00133   <font class="keyword">new</font> FXLabel(matrix,<font class="stringliteral">"DrawIndexY"</font>,NULL,LAYOUT_CENTER_Y|LAYOUT_CENTER_X|JUSTIFY_RIGHT|LAYOUT_FILL_ROW);
00134   <font class="keyword">new</font> FXTextField(matrix,10,&amp;drawindexy_target,FXDataTarget::ID_VALUE,TEXTFIELD_INTEGER|JUSTIFY_RIGHT|LAYOUT_CENTER_Y|LAYOUT_CENTER_X|FRAME_SUNKEN|FRAME_THICK|LAYOUT_FILL_ROW);
00135   <font class="comment">//new FXSpinner(matrix,5,&amp;drawindexy_target,1,SPIN_CYCLIC|FRAME_SUNKEN|FRAME_THICK|LAYOUT_CENTER_Y|LAYOUT_FILL_ROW);</font>
00136   <font class="keyword">new</font> FXFrame(matrix,LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW);
00137   <font class="keyword">new</font> FXToggleButton(matrix,<font class="stringliteral">"Attached Camera OFF"</font>,<font class="stringliteral">"Attached Camera ON"</font>,NULL,NULL,<font class="keyword">this</font>,81,LAYOUT_CENTER_Y|LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW|ICON_BEFORE_TEXT);
00138   <font class="keyword">new</font> FXToggleButton(matrix,<font class="stringliteral">"Show Path OFF"</font>,<font class="stringliteral">"Show Path ON"</font>,NULL,NULL,<font class="keyword">this</font>,80,LAYOUT_CENTER_Y|LAYOUT_FILL_COLUMN|LAYOUT_FILL_ROW|ICON_BEFORE_TEXT);
00139 
00140   <font class="keyword">new</font> FXHorizontalSeparator(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|SEPARATOR_GROOVE|LAYOUT_FILL_X);
00141 
00142   <font class="comment">// Install an accelerator</font>
00143   getAccelTable()-&gt;addAccel(fxparseaccel(<font class="stringliteral">"Ctl-Q"</font>),getApp(),MKUINT(-1,SEL_COMMAND));
00144   }
00145 
00146 
00147 <font class="comment">// Clean up</font>
00148 MSLPlannerWindow::~MSLPlannerWindow()<font class="keyword"></font>{
00149   <font class="keyword">delete</font> loadmenu;
00150   <font class="keyword">delete</font> savemenu;
00151   <font class="keyword">delete</font> plotmenu;
00152   <font class="keyword">delete</font> plannermenu;
00153   }
00154 
00155 
00156 <font class="comment">// Timer  </font>
00157 <font class="keywordtype">long</font> MSLPlannerWindow::onCmdTimer(FXObject*,FXSelector,<font class="keywordtype">void</font>*)<font class="keyword"> </font>{
00158   
00159   <font class="comment">// Reset timer for next time</font>
00160   getApp()-&gt;addTimeout(80,<font class="keyword">this</font>,FXMainWindow::ID_LAST);
00161   <font class="keywordflow">return</font> 1;
00162 }
00163 
00164 
00165   
00166 <font class="comment">// Start</font>
00167 <font class="keywordtype">void</font> MSLPlannerWindow::create()<font class="keyword"></font>{
00168   
00169   <font class="comment">// Create windows</font>
00170   FXMainWindow::create();
00171   
00172   <font class="comment">// Kick off the timer</font>
00173   getApp()-&gt;addTimeout(80,<font class="keyword">this</font>,FXMainWindow::ID_LAST);
00174 
00175   <font class="comment">// Show</font>
00176   show(PLACEMENT_SCREEN);
00177 }
00178 
00179 
00180 
00181 <font class="keywordtype">void</font> MSLPlannerWindow::Restart()<font class="keyword"> </font>{
00182   
00183   <font class="comment">// Make the target connections</font>
00184   plannerdeltat_target.connect(GP-&gt;Pl-&gt;PlannerDeltaT);
00185   numnodes_target.connect(GP-&gt;Pl-&gt;NumNodes);
00186   drawindexx_target.connect(GP-&gt;DrawIndexX);
00187   drawindexy_target.connect(GP-&gt;DrawIndexY);
00188   animationtimescale_target.connect(GP-&gt;R-&gt;AnimationTimeScale);
00189   ambientlight_target.connect(GP-&gt;R-&gt;AmbientLight);
00190 }
00191 
00192 
00193 <font class="comment">// Timer  </font>
00194 <font class="keywordtype">long</font> MSLPlannerWindow::GeneralHandler(FXObject*,FXSelector sel,<font class="keywordtype">void</font>*)<font class="keyword"> </font>{
00195   <font class="keywordtype">int</font> i = SELID(sel);
00196   <font class="comment">//cout &lt;&lt; "General Handler  -- selection " &lt;&lt; i &lt;&lt; "\n";</font>
00197 
00198   GP-&gt;ButtonHandle(i);
00199 
00200   <font class="keywordflow">return</font> 1;
00201 }
00202 
00203 
00204 
00205 
00206 <font class="comment">// *********************************************************************</font>
00207 <font class="comment">// *********************************************************************</font>
00208 <font class="comment">// CLASS:     MSLPlotWindow</font>
00209 <font class="comment">// </font>
00210 <font class="comment">// *********************************************************************</font>
00211 <font class="comment">// *********************************************************************</font>
00212 
00213 
00214 
00215 <font class="comment">// Message Map for the Plot Window class</font>
00216 <a class="code" href="guiplanner_C.html#a0">FXDEFMAP</a>(<a class="code" href="class_MSLPlotWindow.html">MSLPlotWindow</a>) MSLPlotWindowMap[]={
00217 
00218   <font class="comment">//________Message_Type_____________________ID____________Message_Handler_______</font>
00219   FXMAPFUNC(SEL_PAINT,MSLPlotWindow::ID_CANVAS, MSLPlotWindow::onPaint),
00220   FXMAPFUNC(SEL_COMMAND,MSLPlotWindow::ID_PRINT, MSLPlotWindow::onCmdPrint),
00221 };
00222 
00223 
00224 
00225 <font class="comment">// Macro for the PlotApp class hierarchy implementation</font>
00226 <a class="code" href="guiplanner_C.html#a1">FXIMPLEMENT</a>(<a class="code" href="class_MSLPlotWindow.html">MSLPlotWindow</a>,<a class="code" href="class_FXDialogBox.html">FXDialogBox</a>,MSLPlotWindowMap,ARRAYNUMBER(MSLPlotWindowMap))
00227 
00228 
00229 
00230 <font class="comment">// Construct a MSLPlotWindow</font>
00231 <a class="code" href="class_MSLPlotWindow.html#a2">MSLPlotWindow::MSLPlotWindow</a>(<a class="code" href="class_MSLPlannerWindow.html">MSLPlannerWindow</a>* owner):
00232   <a class="code" href="class_FXDialogBox.html">FXDialogBox</a>(owner,"Plot Window",DECOR_ALL,0,0,500,500) {
00233 
00234   Owner = owner;
00235   GP = owner-&gt;GP;
00236   indexx = GP-&gt;DrawIndexX;
00237   indexy = GP-&gt;DrawIndexY;
00238 
00239   <font class="keywordflow">if</font> ((indexx &gt;= GP-&gt;Pl-&gt;P-&gt;StateDim)||(indexx &lt; 0))
00240     indexx = 0;
00241   <font class="keywordflow">if</font> ((indexy &gt;= GP-&gt;Pl-&gt;P-&gt;StateDim)||(indexy &lt; 0))
00242     indexy = 1;
00243 
00244   <font class="keywordtype">char</font>* title = <font class="keyword">new</font> <font class="keywordtype">char</font>[80];
00245   sprintf(title,<font class="stringliteral">"Search Graph(s):   x[%d] vs. x[%d]"</font>,indexx,indexy);
00246 
00247   contents=<font class="keyword">new</font> FXHorizontalFrame(<font class="keyword">this</font>,LAYOUT_SIDE_TOP|LAYOUT_FILL_X|LAYOUT_FILL_Y,0,0,0,0, 0,0,0,0);
00248   
00249   <font class="comment">// LEFT pane to contain the canvas</font>
00250   canvasFrame=<font class="keyword">new</font> FXVerticalFrame(contents,FRAME_SUNKEN|LAYOUT_FILL_X|LAYOUT_FILL_Y|LAYOUT_TOP|LAYOUT_LEFT,0,0,0,0,10,10,10,10);
00251   
00252     <font class="comment">// Label above the canvas               </font>
00253   <font class="keyword">new</font> FXLabel(canvasFrame,title,NULL,JUSTIFY_CENTER_X|LAYOUT_FILL_X);
00254   
00255     <font class="comment">// Horizontal divider line</font>
00256   <font class="keyword">new</font> FXHorizontalSeparator(canvasFrame,SEPARATOR_GROOVE|LAYOUT_FILL_X);
00257 
00258     <font class="comment">// Drawing canvas</font>
00259   canvas=<font class="keyword">new</font> FXCanvas(canvasFrame,<font class="keyword">this</font>,ID_CANVAS,FRAME_SUNKEN|FRAME_THICK|LAYOUT_FILL_X|LAYOUT_FILL_Y|LAYOUT_TOP|LAYOUT_LEFT);
00260 
00261   <font class="comment">// RIGHT pane for the buttons</font>
00262   buttonFrame=<font class="keyword">new</font> FXVerticalFrame(contents,FRAME_SUNKEN|LAYOUT_FILL_Y|LAYOUT_TOP|LAYOUT_LEFT,0,0,0,0,10,10,10,10);
00263 
00264     <font class="comment">// Label above the buttons  </font>
00265     <font class="keyword">new</font> FXLabel(buttonFrame,<font class="stringliteral">"Options"</font>,NULL,JUSTIFY_CENTER_X|LAYOUT_FILL_X);
00266     
00267     <font class="comment">// Horizontal divider line</font>
00268     <font class="keyword">new</font> FXHorizontalSeparator(buttonFrame,SEPARATOR_RIDGE|LAYOUT_FILL_X);
00269 
00270     <font class="comment">// Button to print</font>
00271     <font class="keyword">new</font> FXButton(buttonFrame,<font class="stringliteral">"&amp;Print"</font>,NULL,<font class="keyword">this</font>,ID_PRINT,FRAME_THICK|FRAME_RAISED|LAYOUT_FILL_X|LAYOUT_TOP|LAYOUT_LEFT,0,0,0,0,10,10,5,5);
00272 
00273     <font class="comment">// Exit button</font>
00274     <font class="keyword">new</font> FXButton(buttonFrame,<font class="stringliteral">"&amp;Exit"</font>,NULL,<font class="keyword">this</font>,ID_HIDE,FRAME_THICK|FRAME_RAISED|LAYOUT_FILL_X|LAYOUT_TOP|LAYOUT_LEFT,0,0,0,0,10,10,5,5);
00275 
00276 }
00277     
00278  
00279 
00280 <font class="comment">// Paint the canvas</font>
<a name="l00281"></a><a class="code" href="class_MSLPlotWindow.html#a0">00281</a> <font class="keywordtype">long</font> <a class="code" href="class_MSLPlotWindow.html#a0">MSLPlotWindow::onPaint</a>(FXObject*,FXSelector,<font class="keywordtype">void</font>* ptr)<font class="keyword"></font>{
00282   FXEvent *ev=(FXEvent*)ptr;
00283   FXDCWindow dc(canvas,ev);
00284   dc.setForeground(canvas-&gt;getBackColor());
00285   dc.fillRectangle(ev-&gt;rect.x,ev-&gt;rect.y,ev-&gt;rect.w,ev-&gt;rect.h);
00286   <a class="code" href="class_MSLPlotWindow.html#a3">drawPage</a>(dc,canvas-&gt;getWidth(),canvas-&gt;getHeight());
00287   <font class="keywordflow">return</font> 1;
00288 }
00289 
00290 
<a name="l00291"></a><a class="code" href="class_MSLPlotWindow.html#a1">00291</a> <font class="keywordtype">long</font> <a class="code" href="class_MSLPlotWindow.html#a1">MSLPlotWindow::onCmdPrint</a>(FXObject*,FXSelector,<font class="keywordtype">void</font>*)<font class="keyword"></font>{
00292   FXPrintDialog dlg(<font class="keyword">this</font>,<font class="stringliteral">"Print Graphics"</font>);
00293   FXPrinter printer;
00294   <font class="keywordflow">if</font>(dlg.execute()){
00295     dlg.getPrinter(printer);
00296     FXTRACE((100,<font class="stringliteral">"Printer = %s\n"</font>,printer.name.text()));
00297     FXDCPrint pdc(getApp());
00298     <font class="keywordflow">if</font>(!pdc.beginPrint(printer)) {
00299       FXMessageBox::error(<font class="keyword">this</font>,MBOX_OK,<font class="stringliteral">"Printer Error"</font>,<font class="stringliteral">"Unable to print"</font>);
00300       <font class="keywordflow">return</font> 1;
00301     }
00302     pdc.beginPage(1);
00303     pdc.setLineWidth(1);
00304     <a class="code" href="class_MSLPlotWindow.html#a3">drawPage</a>(pdc,400,400,100,100);
00305     pdc.endPage();
00306     pdc.endPrint();
00307     }
00308   <font class="keywordflow">return</font> 1;
00309 }
00310 
00311 
00312 
00313 <font class="comment">// This is the WYSIWYG routine, it takes a DC and renders </font>
00314 <font class="comment">// into it; it does not know if the DC is a printer or screen.</font>
<a name="l00315"></a><a class="code" href="class_MSLPlotWindow.html#a3">00315</a> <font class="keywordtype">void</font> <a class="code" href="class_MSLPlotWindow.html#a3">MSLPlotWindow::drawPage</a>(FXDC&amp; dc,FXint w,FXint h,
00316                              FXint tx = 0,FXint ty = 0)<font class="keyword"> </font>{
00317   list&lt;MSLNode*&gt; nlist;
00318   list&lt;MSLNode*&gt;::iterator ni;
00319   list&lt;MSLEdge*&gt; elist;
00320   list&lt;MSLEdge*&gt;::iterator ei;
00321   <a class="code" href="class_MSLVector.html">MSLVector</a> x1,x2;
00322   <font class="keywordtype">double</font> tranx,trany,scalex,scaley;
00323   <font class="keywordtype">int</font> lw;
00324 
00325   <font class="comment">//dc.setForeground(erasecolor);</font>
00326   <font class="comment">//dc.fillRectangle(0,0,w,h);</font>
00327 
00328   <font class="comment">//dc.setForeground(forecolor);</font>
00329   <font class="comment">//dc.setBackground(FXRGB(0,0,0));</font>
00330   
00331   <font class="comment">//dc.setLineStyle(lineStyle);</font>
00332   <font class="comment">//dc.setLineCap(capStyle);</font>
00333   <font class="comment">//dc.setLineJoin(joinStyle);</font>
00334   <font class="comment">//dc.setFunction(function);</font>
00335   
00336   <font class="comment">//dc.setStipple(stipple);</font>
00337   <font class="comment">//dc.setFillStyle(fillStyle);</font>
00338   <font class="comment">//dc.setLineWidth(lineWidthSpinner-&gt;getValue());</font>
00339   lw = dc.getLineWidth();
00340   dc.setLineWidth(0);
00341 
00342   dc.setForeground(FXRGB(0,0,0));
00343   dc.drawRectangle(tx,ty,w,h);
00344 
00345   scalex = w/(GP-&gt;Pl-&gt;P-&gt;UpperState[indexx] - 
00346               GP-&gt;Pl-&gt;P-&gt;LowerState[indexx]); 
00347   scaley = -h/(GP-&gt;Pl-&gt;P-&gt;UpperState[indexy] - 
00348               GP-&gt;Pl-&gt;P-&gt;LowerState[indexy]); 
00349   tranx = tx-1.0 * scalex * GP-&gt;Pl-&gt;P-&gt;LowerState[indexx];
00350   trany = ty+h-1.0 * scaley * GP-&gt;Pl-&gt;P-&gt;LowerState[indexy];
00351 
00352   <font class="comment">// Show path (if it exists)</font>
00353   dc.setForeground(FXRGB(200,0,0));
00354   dc.setLineWidth(2);
00355   list&lt;MSLVector&gt; path;
00356   list&lt;MSLVector&gt;::iterator pi;
00357   path = GP-&gt;Pl-&gt;Path;
00358   <font class="keywordflow">if</font> (path.size() &gt;= 2) {
00359     x1 = path.front();
00360     pi = path.begin(); 
00361     pi++;
00362     <font class="keywordflow">while</font> (pi != path.end()) {
00363       x2 = *pi;
00364       dc.drawLine(x1[indexx]*scalex+tranx,
00365                   x1[indexy]*scaley+trany,
00366                   x2[indexx]*scalex+tranx,
00367                   x2[indexy]*scaley+trany);
00368       x1 = x2;
00369       pi++;
00370     }
00371   }
00372 
00373   <font class="comment">// Show first tree (if it exists)</font>
00374   dc.setLineWidth(lw);
00375   dc.setForeground(FXRGB(0,0,255));
00376   <font class="keywordflow">if</font> (GP-&gt;Pl-&gt;T) {
00377     nlist = GP-&gt;Pl-&gt;T-&gt;Nodes();
00378     <a class="code" href="defs_h.html#a8">forall</a>(ni,nlist)<font class="keyword"> </font>{
00379       <font class="keywordflow">if</font> ((*ni)-&gt;Parent()) {  <font class="comment">// Make sure it has a parent to connect to!</font>
00380         x1 = (*ni)-&gt;State();
00381         x2 = (*ni)-&gt;Parent()-&gt;State();
00382         dc.drawLine(x1[indexx]*scalex+tranx,
00383                     x1[indexy]*scaley+trany,
00384                     x2[indexx]*scalex+tranx,
00385                     x2[indexy]*scaley+trany);
00386       }
00387     }
00388   }
00389   <font class="comment">// Show second tree (if it exists)</font>
00390   dc.setForeground(FXRGB(255,0,0));
00391   <font class="keywordflow">if</font> (GP-&gt;Pl-&gt;T2) {
00392     nlist = GP-&gt;Pl-&gt;T2-&gt;Nodes();
00393     <a class="code" href="defs_h.html#a8">forall</a>(ni,nlist)<font class="keyword"> </font>{
00394       <font class="keywordflow">if</font> ((*ni)-&gt;Parent()) {  <font class="comment">// Make sure it has a parent to connect to!</font>
00395         x1 = (*ni)-&gt;State();
00396         x2 = (*ni)-&gt;Parent()-&gt;State();
00397         dc.drawLine(x1[indexx]*scalex+tranx,
00398                     x1[indexy]*scaley+trany,
00399                     x2[indexx]*scalex+tranx,
00400                     x2[indexy]*scaley+trany);
00401       }
00402     }
00403   }
00404 
00405   <font class="comment">// Show roadmap (if it exists)</font>
00406   dc.setForeground(FXRGB(0,150,0));
00407   <font class="keywordflow">if</font> (GP-&gt;Pl-&gt;Roadmap) {
00408     elist = GP-&gt;Pl-&gt;Roadmap-&gt;Edges();
00409     <a class="code" href="defs_h.html#a8">forall</a>(ei,elist)<font class="keyword"> </font>{
00410       x1 = (*ei)-&gt;Source()-&gt;State();
00411       x2 = (*ei)-&gt;Target()-&gt;State();
00412       dc.drawLine(x1[indexx]*scalex+tranx,
00413                   x1[indexy]*scaley+trany,
00414                   x2[indexx]*scalex+tranx,
00415                   x2[indexy]*scaley+trany);
00416     }
00417   }
00418 
00419   <font class="comment">// Restore original values</font>
00420   dc.setLineWidth(lw);
00421 }
00422 
00423 
00424 
00425 <font class="comment">// *********************************************************************</font>
00426 <font class="comment">// *********************************************************************</font>
00427 <font class="comment">// CLASS:     GuiPlanner</font>
00428 <font class="comment">// </font>
00429 <font class="comment">// *********************************************************************</font>
00430 <font class="comment">// *********************************************************************</font>
00431 
<a name="l00432"></a><a class="code" href="class_GuiPlanner.html#a2">00432</a> <a class="code" href="class_GuiPlanner.html#a2">GuiPlanner::GuiPlanner</a>(<a class="code" href="class_Render.html">Render</a> *render, <a class="code" href="class_Planner.html">Planner</a> *planner):<a class="code" href="class_Gui.html">Gui</a>(render) {
00433   Pl = planner;
00434 
00435   LineWidth = 1.0;
00436   PSLineWidth = 1.0;
00437   DrawIndexX = 0;
00438   DrawIndexY = 1;
00439 
00440   <font class="keywordflow">if</font> (!render) 
00441     cout &lt;&lt; <font class="stringliteral">"ERROR: Renderer no defined\n"</font>;
00442 
00443   FilePath = Pl-&gt;P-&gt;FilePath;
00444 
00445   <a class="code" href="class_GuiPlanner.html#b1">CreateMenuWindow</a>();
00446 }
00447 
00448 
00449 
<a name="l00450"></a><a class="code" href="class_GuiPlanner.html#b0">00450</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#b0">GuiPlanner::Init</a>()<font class="keyword"> </font>{
00451   list&lt;MSLVector&gt; tpath;
00452   
00453   <font class="comment">// Read the planner type, if exists</font>
00454   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRT.html">RRT</a>"))
00455     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(201);
00456   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTGoalBias.html">RRTGoalBias</a>"))
00457     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(202);
00458   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "RRTGoalPull"))
00459     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(203);
00460   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTCon.html">RRTCon</a>"))
00461     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(204);
00462   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTPolar.html">RRTPolar</a>"))
00463     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(208);
00464   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTHull.html">RRTHull</a>"))
00465     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(209);
00466   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "RRTStar"))
00467     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(212);
00468   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTGoalZoom.html">RRTGoalZoom</a>"))
00469     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(207);
00470   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTDual.html">RRTDual</a>")) 
00471     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(205);
00472   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTExtExt.html">RRTExtExt</a>"))
00473     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(206);
00474   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTExtCon.html">RRTExtCon</a>"))
00475     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(210);
00476   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_RRTConCon.html">RRTConCon</a>"))
00477     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(211);
00478   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "PlannerHsu"))
00479     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(213);
00480   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "RRTNaive"))
00481     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(214);    
00482   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_PRM.html">PRM</a>"))
00483     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(230);    
00484   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_FDP.html">FDP</a>"))
00485     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(240);    
00486   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_FDPStar.html">FDPStar</a>"))
00487     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(241);    
00488   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_FDPBestFirst.html">FDPBestFirst</a>"))
00489     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(242);    
00490   <font class="keywordflow">if</font> (<a class="code" href="util_C.html#a6">is_file</a>(Pl-&gt;P-&gt;FilePath + "<a class="code" href="class_FDPBi.html">FDPBi</a>"))
00491     <a class="code" href="class_GuiPlanner.html#a1">ButtonHandle</a>(243);    
00492   
00493   <a class="code" href="class_Gui.html#b1">Gui::Init</a>();
00494 
00495   <font class="comment">// Set up to animate a single frame initially</font>
00496   tpath.clear();
00497   <font class="comment">//tpath.push(Pl-&gt;P-&gt;GoalState);</font>
00498   tpath.push_back(Pl-&gt;P-&gt;InitialState);
00499   R-&gt;MakeAnimationFrames(tpath, 1.0);   
00500   R-&gt;AnimationActive = <font class="keyword">true</font>;
00501 }
00502 
00503 
<a name="l00504"></a><a class="code" href="class_GuiPlanner.html#b1">00504</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#b1">GuiPlanner::CreateMenuWindow</a>()<font class="keyword"> </font>{
00505   <font class="keywordtype">int</font> argc;
00506   <font class="keywordtype">char</font> **argv;
00507 
00508   <font class="comment">// Make application</font>
00509   <font class="comment">//FXApp application("DataTarget","FoxTest");</font>
00510   
00511   <font class="comment">// Open display (multiple inheritance from FXApp)</font>
00512   init(argc,argv);
00513   
00514   <font class="comment">// Main window</font>
00515   Window=<font class="keyword">new</font> MSLPlannerWindow(<font class="keyword">this</font>);
00516   
00517   <font class="comment">// Handle interrupt to save stuff nicely (from FXApp)</font>
00518   <font class="comment">//addSignal(SIGINT,Window,FXApp::ID_QUIT);</font>
00519 
00520   <font class="comment">// Create app (from FXApp)</font>
00521   create();
00522   
00523   <font class="comment">// Run (from FXApp)</font>
00524   <font class="comment">//run();</font>
00525 
00526 }
00527 
00528 
<a name="l00529"></a><a class="code" href="class_GuiPlanner.html#a4">00529</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a4">GuiPlanner::ResetPlanner</a>()<font class="keyword">
</font>00530 <font class="keyword"></font>{
00531   R-&gt;SetScene(<font class="keyword">new</font> Scene(Pl-&gt;P,FilePath));
00532   Pl-&gt;<a class="code" href="class_Planner.html#a2">Reset</a>();
00533   Window-&gt;<a class="code" href="class_MSLPlannerWindow.html#c4">Restart</a>();
00534 }
00535 
00536 
<a name="l00537"></a><a class="code" href="class_GuiPlanner.html#a1">00537</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a1">GuiPlanner::ButtonHandle</a>(<font class="keywordtype">int</font> b)<font class="keyword"></font>{
00538   <font class="comment">//cout &lt;&lt; "button " &lt;&lt; b &lt;&lt; "\n";</font>
00539   <font class="comment">//char *icon;</font>
00540   <font class="keywordflow">if</font> ((b &gt;= 70) &amp;&amp; (b &lt;= 90))
00541     R-&gt;ButtonHandle(b);
00542   <font class="keywordflow">else</font> {
00543     <font class="keywordflow">switch</font> (b) {
00544     <font class="keywordflow">case</font> 22: cout &lt;&lt; <font class="stringliteral">"Construct\n"</font>;
00545       Pl-&gt;<a class="code" href="class_Planner.html#a3">Construct</a>();
00546       <font class="comment">//U.DrawGraphs();</font>
00547       <font class="keywordflow">break</font>;
00548     <font class="keywordflow">case</font> 23: cout &lt;&lt; <font class="stringliteral">"Plan\n"</font>;
00549       <font class="keywordflow">if</font> (Pl-&gt;<a class="code" href="class_Planner.html#a4">Plan</a>()) {
00550         cout &lt;&lt; <font class="stringliteral">"Making Animation Frames\n"</font>;
00551         <font class="comment">// Make the animation frames</font>
00552         <font class="keywordflow">if</font> ((Pl-&gt;Path.size() &gt;= 2)||
00553             (R-&gt;FrameList.size() &gt; 0))
00554           {
00555           R-&gt;MakeAnimationFrames(Pl-&gt;Path,Pl-&gt;TimeList); 
00556           }
00557       }
00558       <font class="comment">//U.DrawPath();</font>
00559       <font class="comment">//U.DrawGraphs();</font>
00560       <font class="keywordflow">break</font>;
00561     <font class="keywordflow">case</font> 24: cout &lt;&lt; <font class="stringliteral">"Clear Graphs\n"</font>;
00562       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00563       <font class="keywordflow">break</font>;
00564     <font class="keywordflow">case</font> 31: cout &lt;&lt; <font class="stringliteral">"2D Graph Projection\n"</font>;
00565       <a class="code" href="class_GuiPlanner.html#a11">DrawGraphs</a>();
00566       <font class="keywordflow">break</font>;
00567     <font class="keywordflow">case</font> 32: cout &lt;&lt; <font class="stringliteral">"3D Graph Projection\n"</font>;
00568       <font class="comment">//DrawRRTNodes();</font>
00569       <font class="keywordflow">break</font>;
00570     <font class="keywordflow">case</font> 33: cout &lt;&lt; <font class="stringliteral">"Draw Voronoi Diagram\n"</font>;
00571       <font class="comment">//DrawVoronoi();</font>
00572       <font class="keywordflow">break</font>;
00573     <font class="keywordflow">case</font> 41: cout &lt;&lt; <font class="stringliteral">"Write 2D Graph Projection to PS\n"</font>;
00574       <font class="comment">//PSDrawGraphs();</font>
00575       <font class="keywordflow">break</font>;
00576     <font class="keywordflow">case</font> 42: cout &lt;&lt; <font class="stringliteral">"Write Voronoi Edges to PS\n"</font>;
00577       <font class="comment">//PSDrawVoronoi();</font>
00578       <font class="keywordflow">break</font>;
00579     <font class="keywordflow">case</font> 43: cout &lt;&lt; <font class="stringliteral">"Write Path to PS\n"</font>;
00580       <font class="comment">//PSDrawPath();</font>
00581       <font class="keywordflow">break</font>;
00582     <font class="keywordflow">case</font> 44: cout &lt;&lt; <font class="stringliteral">"Write Graph(s)\n"</font>;
00583       <a class="code" href="class_GuiPlanner.html#a5">WriteGraphs</a>();
00584       <font class="keywordflow">break</font>;
00585     <font class="keywordflow">case</font> 45: cout &lt;&lt; <font class="stringliteral">"Read Graph(s)\n"</font>;
00586       <a class="code" href="class_GuiPlanner.html#a6">ReadGraphs</a>();
00587       <font class="keywordflow">break</font>;
00588     <font class="keywordflow">case</font> 46: cout &lt;&lt; <font class="stringliteral">"Write Animation Frames\n"</font>;
00589       <a class="code" href="class_GuiPlanner.html#a8">WriteAnimationFrames</a>();
00590       <font class="keywordflow">break</font>;
00591     <font class="keywordflow">case</font> 47: cout &lt;&lt; <font class="stringliteral">"Read Animation Frames\n"</font>;
00592       <a class="code" href="class_GuiPlanner.html#a7">ReadAnimationFrames</a>();      
00593       <font class="keywordflow">break</font>;
00594     <font class="keywordflow">case</font> 48: cout &lt;&lt; <font class="stringliteral">"Write Path\n"</font>;
00595       <a class="code" href="class_GuiPlanner.html#a10">WritePath</a>();
00596       <font class="keywordflow">break</font>;
00597     <font class="keywordflow">case</font> 49: cout &lt;&lt; <font class="stringliteral">"Read Path\n"</font>;
00598       <a class="code" href="class_GuiPlanner.html#a9">ReadPath</a>();      
00599       <font class="keywordflow">break</font>;
00600     <font class="keywordflow">case</font> 51: cout &lt;&lt; <font class="stringliteral">"Done\n"</font>;
00601       Finished = <font class="keyword">true</font>;  <font class="comment">// This should trigger leaving (for most renderers)</font>
00602       <font class="keywordflow">break</font>;
00603     <font class="keywordflow">case</font> 80: cout &lt;&lt; <font class="stringliteral">"Toggle Show Path\n"</font>;
00604       R-&gt;ShowPathOn = !R-&gt;ShowPathOn; 
00605       <font class="keywordflow">break</font>;
00606     <font class="keywordflow">case</font> 201: cout &lt;&lt; <font class="stringliteral">"Switch to RRT Planner\n"</font>;
00607       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00608       Pl = <font class="keyword">new</font> RRT(Pl-&gt;P); <font class="comment">// Keep the old model, change the planner</font>
00609       <font class="keywordflow">break</font>;
00610     <font class="keywordflow">case</font> 202: cout &lt;&lt; <font class="stringliteral">"Switch to RRTGoalBias Planner\n"</font>;
00611       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00612       Pl = <font class="keyword">new</font> RRTGoalBias(Pl-&gt;P); <font class="comment">// Keep the old model, change the planner</font>
00613       <font class="keywordflow">break</font>;
00614     <font class="keywordflow">case</font> 203: cout &lt;&lt; <font class="stringliteral">"Switch to RRTGoalPull Planner\n"</font>;
00615       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00616       <font class="comment">//Pl = new RRTGoalPull(Pl-&gt;P); // Keep the old model, change the planner</font>
00617       <font class="keywordflow">break</font>;
00618     <font class="keywordflow">case</font> 204: cout &lt;&lt; <font class="stringliteral">"Switch to RRTCon Planner\n"</font>;
00619       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00620       Pl = <font class="keyword">new</font> RRTCon(Pl-&gt;P); <font class="comment">// Keep the old model, change the planner</font>
00621       <font class="keywordflow">break</font>;
00622     <font class="keywordflow">case</font> 205: cout &lt;&lt; <font class="stringliteral">"Switch to RRTDual Planner\n"</font>;
00623       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00624       Pl = <font class="keyword">new</font> RRTDual(Pl-&gt;P); <font class="comment">// Keep the old model, change the planner</font>
00625       <font class="keywordflow">break</font>;
00626     <font class="keywordflow">case</font> 206: cout &lt;&lt; <font class="stringliteral">"Switch to RRTExtExt Planner\n"</font>;
00627       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00628       Pl = <font class="keyword">new</font> RRTExtExt(Pl-&gt;P); <font class="comment">// Keep the old model, change the planner</font>
00629       <font class="keywordflow">break</font>;
00630     <font class="keywordflow">case</font> 207: cout &lt;&lt; <font class="stringliteral">"Switch to RRTGoalZoom Planner\n"</font>;
00631       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00632       <font class="comment">//Pl = new RRTGoalZoom(Pl-&gt;P); // Keep the old model, change the planner</font>
00633       <font class="keywordflow">break</font>;
00634     <font class="keywordflow">case</font> 208: cout &lt;&lt; <font class="stringliteral">"Switch to RRTPolar Planner\n"</font>;
00635       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00636       <font class="comment">//Pl = new RRTPolar(Pl-&gt;P); // Keep the old model, change the planner</font>
00637       <font class="keywordflow">break</font>;
00638     <font class="keywordflow">case</font> 209: cout &lt;&lt; <font class="stringliteral">"Switch to RRTHull Planner\n"</font>;
00639       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00640       <font class="comment">//Pl = new RRTHull(Pl-&gt;P);</font>
00641       <font class="keywordflow">break</font>;
00642     <font class="keywordflow">case</font> 210: cout &lt;&lt; <font class="stringliteral">"Switch to RRTExtCon (RRT-Connect) Planner\n"</font>;
00643       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00644       Pl = <font class="keyword">new</font> RRTExtCon(Pl-&gt;P);
00645       <font class="keywordflow">break</font>;
00646     <font class="keywordflow">case</font> 211: cout &lt;&lt; <font class="stringliteral">"Switch to RRTConCon Planner\n"</font>;
00647       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00648       Pl = <font class="keyword">new</font> RRTConCon(Pl-&gt;P);
00649       <font class="keywordflow">break</font>;
00650     <font class="keywordflow">case</font> 212: cout &lt;&lt; <font class="stringliteral">"Switch to RRTStar Planner\n"</font>;
00651       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00652       <font class="comment">//Pl = new RRTStar(Pl-&gt;P);</font>
00653       <font class="keywordflow">break</font>;
00654     <font class="keywordflow">case</font> 213: cout &lt;&lt; <font class="stringliteral">"Switch to PlannerHsu Planner\n"</font>;
00655       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00656       <font class="comment">//Pl = new PlannerHsu(Pl-&gt;P);</font>
00657       <font class="keywordflow">break</font>;
00658     <font class="keywordflow">case</font> 214: cout &lt;&lt; <font class="stringliteral">"Switch to RandomTree Planner\n"</font>;
00659       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00660       <font class="comment">//Pl = new RandomTree(Pl-&gt;P);</font>
00661       <font class="keywordflow">break</font>;
00662     <font class="keywordflow">case</font> 230: cout &lt;&lt; <font class="stringliteral">"Switch to PRM Planner\n"</font>;
00663       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00664       Pl = <font class="keyword">new</font> PRM(Pl-&gt;P);
00665       <font class="keywordflow">break</font>;
00666     <font class="keywordflow">case</font> 240: cout &lt;&lt; <font class="stringliteral">"Switch to FDP Planner\n"</font>;
00667       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00668       Pl = <font class="keyword">new</font> FDP(Pl-&gt;P);
00669       <font class="keywordflow">break</font>;
00670     <font class="keywordflow">case</font> 241: cout &lt;&lt; <font class="stringliteral">"Switch to FDPStar Planner\n"</font>;
00671       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00672       Pl = <font class="keyword">new</font> FDPStar(Pl-&gt;P);
00673       <font class="keywordflow">break</font>;
00674     <font class="keywordflow">case</font> 242: cout &lt;&lt; <font class="stringliteral">"Switch to FDPBestFirst Planner\n"</font>;
00675       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00676       Pl = <font class="keyword">new</font> FDPBestFirst(Pl-&gt;P);
00677       <font class="keywordflow">break</font>;
00678     <font class="keywordflow">case</font> 243: cout &lt;&lt; <font class="stringliteral">"Switch to FDPBi Planner\n"</font>;
00679       <a class="code" href="class_GuiPlanner.html#a4">ResetPlanner</a>();
00680       Pl = <font class="keyword">new</font> FDPBi(Pl-&gt;P);
00681       <font class="keywordflow">break</font>;
00682       
00683     <font class="keywordflow">default</font>: cout &lt;&lt; <font class="stringliteral">"Option "</font> &lt;&lt; b &lt;&lt; <font class="stringliteral">" not implemented\n"</font>;
00684       <font class="keywordflow">break</font>;
00685     }
00686   }
00687 }
00688 
00689 
00690 
<a name="l00691"></a><a class="code" href="class_GuiPlanner.html#a0">00691</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a0">GuiPlanner::HandleEvents</a>()<font class="keyword"> </font>{
00692   runOneEvent();  <font class="comment">// Run a FOX event (came from FXApp parent class)</font>
00693 }
00694 
00695 
00696 
<a name="l00697"></a><a class="code" href="class_GuiPlanner.html#a5">00697</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a5">GuiPlanner::WriteGraphs</a>()<font class="keyword">
</font>00698 <font class="keyword"></font>{
00699   FXFileDialog dialog(Window,<font class="stringliteral">"Write Solution Path"</font>);
00700   dialog.setDirectory((<font class="stringliteral">"./"</font>+FilePath).c_str());
00701   dialog.setFilename(<font class="stringliteral">"graphs"</font>);
00702   <font class="keywordflow">if</font> (dialog.execute()) {
00703     std::ofstream outfile(dialog.getFilename().text()); 
00704     <font class="keywordflow">if</font> (outfile) {   
00705       Pl-&gt;<a class="code" href="class_Planner.html#a5">WriteGraphs</a>(outfile);
00706       outfile.close();
00707     }
00708   }
00709 }
00710 
00711 
00712 
<a name="l00713"></a><a class="code" href="class_GuiPlanner.html#a6">00713</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a6">GuiPlanner::ReadGraphs</a>()<font class="keyword">
</font>00714 <font class="keyword"></font>{
00715   FXFileDialog dialog(Window,<font class="stringliteral">"Read Animation Frames"</font>);
00716   dialog.setDirectory((<font class="stringliteral">"./"</font>+FilePath).c_str());
00717   dialog.setFilename(<font class="stringliteral">"graphs"</font>);
00718   <font class="keywordflow">if</font> (dialog.execute()) {
00719     std::ifstream infile(dialog.getFilename().text()); 
00720     <font class="keywordflow">if</font> (infile) {   
00721       Pl-&gt;<a class="code" href="class_Planner.html#a6">ReadGraphs</a>(infile);
00722       infile.close();
00723     }
00724   }
00725 }
00726 
00727 
00728 
<a name="l00729"></a><a class="code" href="class_GuiPlanner.html#a8">00729</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a8">GuiPlanner::WriteAnimationFrames</a>()<font class="keyword">
</font>00730 <font class="keyword"></font>{
00731   FXFileDialog dialog(Window,<font class="stringliteral">"Write Animation Frames"</font>);
00732   dialog.setDirectory((<font class="stringliteral">"./"</font>+FilePath).c_str());
00733   dialog.setFilename(<font class="stringliteral">"frames"</font>);
00734   <font class="keywordflow">if</font> (dialog.execute()) {
00735     std::ofstream outfile(dialog.getFilename().text()); 
00736     <font class="keywordflow">if</font> (outfile) {   
00737       outfile &lt;&lt; R-&gt;FrameList;
00738       outfile.close();
00739     }
00740   }
00741 }
00742 
00743 
00744 
<a name="l00745"></a><a class="code" href="class_GuiPlanner.html#a7">00745</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a7">GuiPlanner::ReadAnimationFrames</a>()<font class="keyword">
</font>00746 <font class="keyword"></font>{
00747   FXFileDialog dialog(Window,<font class="stringliteral">"Read Animation Frames"</font>);
00748   dialog.setDirectory((<font class="stringliteral">"./"</font>+FilePath).c_str());
00749   dialog.setFilename(<font class="stringliteral">"frames"</font>);
00750   <font class="keywordflow">if</font> (dialog.execute()) {
00751     std::ifstream infile(dialog.getFilename().text()); 
00752     <font class="keywordflow">if</font> (infile) {   
00753       infile &gt;&gt; R-&gt;FrameList;
00754       infile.close();
00755     }
00756   }
00757 
00758   R-&gt;AnimationActive = <font class="keyword">true</font>;
00759 }
00760 
00761 
<a name="l00762"></a><a class="code" href="class_GuiPlanner.html#a10">00762</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a10">GuiPlanner::WritePath</a>()<font class="keyword">
</font>00763 <font class="keyword"></font>{
00764   FXFileDialog dialog(Window,<font class="stringliteral">"Write Solution Path"</font>);
00765   dialog.setDirectory((<font class="stringliteral">"./"</font>+FilePath).c_str());
00766   dialog.setFilename(<font class="stringliteral">"path"</font>);
00767   <font class="keywordflow">if</font> (dialog.execute()) {
00768     std::ofstream outfile(dialog.getFilename().text()); 
00769     <font class="keywordflow">if</font> (outfile) {   
00770       outfile &lt;&lt; Pl-&gt;Path;
00771       outfile.close();
00772     }
00773   }
00774 }
00775 
00776 
00777 
<a name="l00778"></a><a class="code" href="class_GuiPlanner.html#a9">00778</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a9">GuiPlanner::ReadPath</a>()<font class="keyword">
</font>00779 <font class="keyword"></font>{
00780   FXFileDialog dialog(Window,<font class="stringliteral">"Read Animation Frames"</font>);
00781   dialog.setDirectory((<font class="stringliteral">"./"</font>+FilePath).c_str());
00782   dialog.setFilename(<font class="stringliteral">"path"</font>);
00783   <font class="keywordflow">if</font> (dialog.execute()) {
00784     std::ifstream infile(dialog.getFilename().text()); 
00785     <font class="keywordflow">if</font> (infile) {   
00786       infile &gt;&gt; Pl-&gt;Path;
00787       infile.close();
00788     }
00789   }
00790 
00791   R-&gt;AnimationActive = <font class="keyword">true</font>;
00792   R-&gt;MakeAnimationFrames(Pl-&gt;Path,Pl-&gt;TimeList); 
00793 }
00794 
00795 
<a name="l00796"></a><a class="code" href="class_GuiPlanner.html#a11">00796</a> <font class="keywordtype">void</font> <a class="code" href="class_GuiPlanner.html#a11">GuiPlanner::DrawGraphs</a>()<font class="keyword">
</font>00797 <font class="keyword"></font>{
00798   <a class="code" href="class_MSLPlotWindow.html">MSLPlotWindow</a> *pw = <font class="keyword">new</font> <a class="code" href="class_GuiPlanner.html#l0">MSLPlotWindow</a>(Window);
00799 
00800   <font class="comment">//pw-&gt;execute();  This one is modal</font>
00801   pw-&gt;create();
00802   pw-&gt;show();
00803 
00804   cout &lt;&lt; <font class="stringliteral">"Draw Graphs\n"</font>;
00805 }
00806 
</div></pre><HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<p>

<hr>

Web page maintained by 
<a href="http://janowiec.cs.iastate.edu/~lavalle">Steve LaValle</a><br>

Partial support provided by NSF CAREER Award IRI-970228 (LaValle),
Honda Research, and Iowa State University.<br>

Contributors:  Anna Atramentov, Peng Cheng, James Kuffner, Steve LaValle, and Libo Yang.<br>
