<HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<body bgcolor="#ffffff">

<center><img src="msl.jpg"></center>

<p>


<!-- Generated by Doxygen 1.2.2 on Wed Aug 29 23:26:44 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>render.C</h1><a href="render_C.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------</font>
00002 <font class="comment">//               The Motion Strategy Library (MSL)</font>
00003 <font class="comment">//----------------------------------------------------------------------</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Copyright (c) 1998-2000 Iowa State University and Steve LaValle.  </font>
00006 <font class="comment">// All Rights Reserved.</font>
00007 <font class="comment">// </font>
00008 <font class="comment">// Permission to use, copy, and distribute this software and its </font>
00009 <font class="comment">// documentation is hereby granted free of charge, provided that </font>
00010 <font class="comment">// (1) it is not a component of a commercial product, and </font>
00011 <font class="comment">// (2) this notice appears in all copies of the software and</font>
00012 <font class="comment">//     related documentation. </font>
00013 <font class="comment">// </font>
00014 <font class="comment">// Iowa State University and the author make no representations</font>
00015 <font class="comment">// about the suitability or fitness of this software for any purpose.  </font>
00016 <font class="comment">// It is provided "as is" without express or implied warranty.</font>
00017 <font class="comment">//----------------------------------------------------------------------</font>
00018 
00019 <font class="preprocessor">#include &lt;math.h&gt;</font>
00020 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00021 
00022 <font class="preprocessor">#include "<a class="code" href="render_h.html">render.h</a>"</font>
00023 <font class="preprocessor">#include "<a class="code" href="defs_h.html">defs.h</a>"</font>
00024 
00025 <font class="comment">// Include the VCR buttons</font>
00026 <font class="preprocessor">#include "pixmaps/ff.xpm"</font>
00027 <font class="preprocessor">#include "pixmaps/pause.xpm"</font>
00028 <font class="preprocessor">#include "pixmaps/play.xpm"</font>
00029 <font class="preprocessor">#include "pixmaps/rw.xpm"</font>
00030 <font class="preprocessor">#include "pixmaps/stop.xpm"</font>
00031 <font class="preprocessor">#include "pixmaps/prev.xpm"</font>
00032 <font class="preprocessor">#include "pixmaps/next.xpm"</font>
00033 
00034 <font class="comment">// Include the msl icon</font>
00035 <font class="preprocessor">#include "pixmaps/msl.xpm"</font>
00036 
00037 
00039 <font class="comment">//</font>
00040 <font class="comment">// Render Class</font>
00041 <font class="comment">//
</font>00043 <font class="comment"></font>
<a name="l00044"></a><a class="code" href="class_Render.html#a0">00044</a> <a class="code" href="class_Render.html#a0">Render::Render</a>()<font class="keyword"> </font>{
00045   <a class="code" href="class_Render.html#a0">Render</a>(<font class="stringliteral">""</font>);
00046 }
00047 
00048 
<a name="l00049"></a><a class="code" href="class_Render.html#a1">00049</a> <a class="code" href="class_Render.html#a0">Render::Render</a>(string filepath)<font class="keyword">
</font>00050 <font class="keyword"></font>{
00051   FilePath = filepath;
00052 }
00053 
00054 
<a name="l00055"></a><a class="code" href="class_Render.html#a2">00055</a> <a class="code" href="class_Render.html#a0">Render::Render</a>(<a class="code" href="class_Scene.html">Scene</a> *s, string filepath)<font class="keyword">
</font>00056 <font class="keyword"></font>{
00057   <a class="code" href="class_Render.html#a14">SetScene</a>(s);
00058 
00059   FilePath = filepath;
00060   ControlFreak = <font class="keyword">false</font>;
00061 }
00062 
00063 
00064 <font class="comment">// This sets up the file names for the environment and movable bodies</font>
<a name="l00065"></a><a class="code" href="class_Render.html#a4">00065</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a4">Render::Init</a>()<font class="keyword">
</font>00066 <font class="keyword"></font>{
00067   <font class="keywordtype">int</font> i;
00068   std::ifstream fin;
00069 
00070   <a class="code" href="class_Render.html#a7">Reset</a>();
00071 
00072   FrameTime = 0.1; <font class="comment">// This is default; each renderer should determine this</font>
00073   AnimationStartPause = 0.0; <font class="comment">// should be in seconds</font>
00074   AnimationEndPause = 0.0;
00075   RenderCtlWindowOn = <font class="keyword">false</font>;
00076 
00077   AttachedCameraOn = <font class="keyword">false</font>;
00078   BoundingBoxOn = <font class="keyword">false</font>;
00079   MultipleViewsOn = <font class="keyword">false</font>;
00080   ShowPathOn = <font class="keyword">false</font>;
00081 
00082   <font class="comment">// Colors for objects (add more if you like, but increase RENDERCOLORS)</font>
00083   <font class="comment">//RGBRed[0] = .467; RGBGreen[0] = 0.53; RGBBlue[0] = 0.6; // Light Slate Gray</font>
00084   RGBRed[0] = 1.0; RGBGreen[0] = 0.0; RGBBlue[0] = 1.0; <font class="comment">// Magenta</font>
00085   RGBRed[1] = 0.8; RGBGreen[1] = 0.0; RGBBlue[1] = 0.0; <font class="comment">// Red</font>
00086   RGBRed[2] = 0.0; RGBGreen[2] = 0.7; RGBBlue[2] = 0.0; <font class="comment">// Green</font>
00087   RGBRed[3] = 0.7; RGBGreen[3] = 0.7; RGBBlue[3] = 0.0; <font class="comment">// Yellow</font>
00088   RGBRed[4] = 0.0; RGBGreen[4] = 0.7; RGBBlue[4] = 0.7; <font class="comment">// Lightblue</font>
00089   RGBRed[5] = 1.0; RGBGreen[5] = 0.0; RGBBlue[5] = 1.0; <font class="comment">// Magenta</font>
00090   RGBRed[6] = 0.0; RGBGreen[6] = 0.0; RGBBlue[6] = 0.7; <font class="comment">// Blue</font>
00091   RGBRed[7] = 1.0; RGBGreen[7] = 0.65; RGBBlue[7] = 0.0; <font class="comment">// Orange</font>
00092   RGBRed[8] = 1.0; RGBGreen[8] = 0.078; RGBBlue[8] = 0.576; <font class="comment">// DeepPink</font>
00093   RGBRed[9] = 1.0; RGBGreen[9] = 0.51; RGBBlue[9] = 0.278; <font class="comment">// Sienna1</font>
00094 
00095   fin.open((FilePath+<font class="stringliteral">"EnvList"</font>).c_str());
00096   <font class="keywordflow">if</font> (fin) {
00097     fin &gt;&gt; EnvList;
00098     fin.close(); }
00099   <font class="keywordflow">else</font> {
00100     fin.open((FilePath+<font class="stringliteral">"Obst"</font>).c_str());
00101     <font class="keywordflow">if</font> (fin)
00102       EnvList.push_back(<font class="stringliteral">"Obst"</font>);
00103     fin.close();
00104   }
00105 
00106   <font class="keywordtype">char</font>* s = <font class="keyword">new</font> <font class="keywordtype">char</font>[50];
00107 
00108   <font class="comment">// Load bodies</font>
00109   fin.open((FilePath+<font class="stringliteral">"BodyList"</font>).c_str());
00110   <font class="keywordflow">if</font> (fin)
00111     fin &gt;&gt; BodyList;
00112   <font class="keywordflow">else</font> {
00113     fin.close();
00114     fin.open((FilePath+<font class="stringliteral">"Robot"</font>).c_str());
00115     <font class="keywordflow">if</font> (fin)
00116       BodyList.push_back(<font class="stringliteral">"Robot"</font>);
00117     <font class="keywordflow">else</font> { <font class="comment">// Multiple robots </font>
00118       <font class="keywordflow">for</font> (i = 0; i &lt; S-&gt;NumBodies; i++) {
00119         fin.close();
00120         sprintf(s,<font class="stringliteral">"%sRobot%d"</font>,FilePath.c_str(),i);
00121         fin.open(s);
00122         <font class="keywordflow">if</font> (fin) {
00123           sprintf(s,<font class="stringliteral">"Robot%d"</font>,i);
00124           BodyList.push_back(string(s)); <font class="comment">// Use the robot from World</font>
00125         }
00126       }
00127     }
00128   }
00129   fin.close();
00130 
00131 }
00132 
00133 
00134 
<a name="l00135"></a><a class="code" href="class_Render.html#a14">00135</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a14">Render::SetScene</a>(<a class="code" href="class_Scene.html">Scene</a> *s)<font class="keyword"> 
</font>00136 <font class="keyword"></font>{
00137   S = s; <font class="comment">// S is the Scene for Render</font>
00138 }
00139 
00140 
<a name="l00141"></a><a class="code" href="class_Render.html#a10">00141</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a10">Render::MakeAnimationFrames</a>(<font class="keyword">const</font> list&lt;MSLVector&gt; &amp;xlist, <font class="keywordtype">double</font> deltat)<font class="keyword"> 
</font>00142 <font class="keyword"></font>{
00143   <font class="keywordtype">double</font> t;
00144   <font class="keywordtype">int</font> i;
00145 
00146   StateList = xlist;
00147   TimeList.clear();
00148   
00149   t = 0.0;
00150   <font class="keywordflow">for</font> (i = 0; i &lt; (<font class="keywordtype">int</font>) xlist.size(); i++) {
00151     TimeList.push_back(t);
00152     t += deltat;
00153   }
00154   
00155   <a class="code" href="class_Render.html#a9">SetFrameList</a>();
00156 }
00157 
00158 
<a name="l00159"></a><a class="code" href="class_Render.html#a11">00159</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a10">Render::MakeAnimationFrames</a>(<font class="keyword">const</font> list&lt;MSLVector&gt; &amp;xlist,
00160                                  <font class="keyword">const</font> list&lt;double&gt; &amp;timelist)<font class="keyword"> 
</font>00161 <font class="keyword"></font>{
00162   StateList = xlist;
00163   TimeList = timelist;
00164   <a class="code" href="class_Render.html#a9">SetFrameList</a>();
00165 }
00166 
00167 
<a name="l00168"></a><a class="code" href="class_Render.html#a9">00168</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a9">Render::SetFrameList</a>()<font class="keyword"> </font>{
00169   <font class="keywordtype">double</font> ltime; <font class="comment">// Lower time</font>
00170   <font class="keywordtype">double</font> utime; <font class="comment">// Upper time</font>
00171   <font class="keywordtype">double</font> crtime; <font class="comment">// Current time</font>
00172   <font class="keywordtype">double</font> lasttime;
00173   <font class="keywordtype">double</font> lambda;
00174   <a class="code" href="class_MSLVector.html">MSLVector</a> sc; <font class="comment">// scene configuration</font>
00175   <a class="code" href="class_MSLVector.html">MSLVector</a> lx,ux; <font class="comment">// lower and upper states</font>
00176   <font class="keywordtype">int</font> i;
00177   list&lt;MSLVector&gt;::iterator stli,tstli;
00178   list&lt;double&gt;::iterator tli,li;
00179 
00180   <font class="comment">//cout &lt;&lt; "Running SetFrameList\n";</font>
00181   <font class="comment">//cout &lt;&lt; "StateList: " &lt;&lt; StateList &lt;&lt; "\n";</font>
00182   <font class="comment">//cout &lt;&lt; "TimeList: " &lt;&lt; TimeList &lt;&lt; "\n";</font>
00183 
00184   FrameList.clear();
00185   NumFrames = 0;
00186 
00187   <font class="keywordflow">if</font> (TimeList.size() &lt; 2) {
00188     <font class="keywordflow">if</font> (TimeList.size() == 1) {
00189       FrameList.push_back(S-&gt;<a class="code" href="class_Scene.html#a3">StateToSceneConfiguration</a>(StateList.front()));
00190       NumFrames = 1;
00191     }
00192     <font class="keywordflow">return</font>;
00193   }
00194 
00195   <font class="comment">// Make the starting pause</font>
00196   <font class="keywordflow">for</font> (i = 0; i &lt; (<font class="keywordtype">int</font>) (AnimationStartPause/FrameTime); i++) {
00197     FrameList.push_back(S-&gt;<a class="code" href="class_Scene.html#a3">StateToSceneConfiguration</a>(StateList.front()));
00198     NumFrames++;
00199   }
00200 
00201   li = TimeList.begin(); li++;
00202   stli = StateList.begin(); stli++;
00203   utime = *li;  <font class="comment">// Time index of second element</font>
00204   ux = *stli;
00205   ltime = TimeList.front();
00206   lx = StateList.front();
00207   crtime = ltime;
00208   lasttime = TimeList.back();
00209   tli = li; tli++;
00210   <font class="keywordflow">while</font> (crtime &lt;= lasttime) {
00211     <font class="keywordflow">while</font> ((utime &lt; crtime)&amp;&amp;  <font class="comment">// Make sure the crtime within upper and lower</font>
00212            (tli != TimeList.end())) {
00213       li++;
00214       stli++;
00215       utime = *li;
00216       ux = *stli;
00217       tli = li; tli++;
00218     }
00219     tli = li; tli--;
00220     ltime = *tli;
00221     tstli = stli; tstli--;
00222     lx = *tstli;
00223     <font class="keywordflow">while</font> (ltime &gt; crtime) { <font class="comment">// This can happen sometimes (I think)!</font>
00224       tli--;
00225       tstli--;
00226       ltime = *tli;
00227       lx = *tstli;
00228     }
00229 
00230     lambda = (crtime - ltime)/(utime - ltime);
00231     <font class="comment">//cout &lt;&lt; "lambda: " &lt;&lt; lambda &lt;&lt; "\n";</font>
00232 
00233     <font class="comment">// Interoplate based on states lx and ux</font>
00234     sc = S-&gt;<a class="code" href="class_Scene.html#a4">InterpolatedSceneConfiguration</a>(lx,ux,lambda);
00235     FrameList.push_back(sc);
00236     NumFrames++;
00237     crtime += FrameTime;
00238   }
00239   
00240   <font class="comment">// Add in the last frame, if necessary</font>
00241   <font class="keywordflow">if</font> (FrameList.back() != (S-&gt;<a class="code" href="class_Scene.html#a3">StateToSceneConfiguration</a>(StateList.back())))
00242     FrameList.push_back(S-&gt;<a class="code" href="class_Scene.html#a3">StateToSceneConfiguration</a>(StateList.back()));
00243 
00244   <font class="comment">// Make the ending pause</font>
00245   <font class="keywordflow">for</font> (i = 0; i &lt; (<font class="keywordtype">int</font>) (AnimationEndPause/FrameTime); i++) {
00246     FrameList.push_back(S-&gt;<a class="code" href="class_Scene.html#a3">StateToSceneConfiguration</a>(StateList.back())); 
00247     NumFrames++;
00248   }
00249 
00250   <font class="comment">//list&lt;MSLVector&gt;::iterator x;</font>
00251   <font class="comment">//cout &lt;&lt; "StateList:\n";</font>
00252   <font class="comment">//forall(x,StateList)</font>
00253   <font class="comment">//  cout &lt;&lt; *x &lt;&lt; "\n";</font>
00254   <font class="comment">//cout &lt;&lt; "TimeList: " &lt;&lt; TimeList &lt;&lt; "\n";</font>
00255   <font class="comment">//cout &lt;&lt; "\n\nFrameList:\n";</font>
00256   <font class="comment">//forall(x,FrameList)</font>
00257   <font class="comment">//  cout &lt;&lt; *x &lt;&lt; "\n";</font>
00258   <font class="comment">//cout &lt;&lt; "NumFrames: " &lt;&lt; NumFrames &lt;&lt; "\n";</font>
00259 }
00260 
00261 
00262 
<a name="l00263"></a><a class="code" href="class_Render.html#b0">00263</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#b0">Render::SetCurrentAnimationFrame</a>()<font class="keyword"> </font>{
00264   <a class="code" href="class_MSLVector.html">MSLVector</a> c(S-&gt;SceneConfigurationDim);
00265   <font class="keywordtype">int</font> num,skip,i;
00266 
00267   <font class="comment">// How long has the frame been stuck?</font>
00268   FrameStuckTime = <a class="code" href="util_C.html#a0">used_time</a>() - LastFrameTime;
00269 
00270   skip = (<font class="keywordtype">int</font>) (AnimationTimeScale * FrameStuckTime / FrameTime);
00271 
00272   <font class="keywordflow">if</font> (skip &gt; 0) {
00273     AnimationFrameIndex += skip;
00274     <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00275   }
00276     
00277   num = FrameList.size();
00278   <font class="keywordflow">if</font> (AnimationFrameIndex &gt; num - 1) {
00279     AnimationFrameIndex = 0;
00280     <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00281   }
00282 
00283   <font class="keywordflow">if</font> (AnimationFrameIndex &lt; 0) {
00284     AnimationFrameIndex = 0;
00285     <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00286   }
00287 
00288   <font class="keywordflow">if</font> (num &gt; 0) {
00289     list&lt;MSLVector&gt;::iterator fi;
00290     fi = FrameList.begin();
00291     <font class="keywordflow">for</font> (i = 0; i &lt; AnimationFrameIndex - 1; i++)
00292       fi++;
00293     c = *fi;
00294   }
00295 
00296   CurrentAnimationFrame = c;
00297 }
00298 
00299 
00300 
<a name="l00301"></a><a class="code" href="class_Render.html#a13">00301</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a13">Render::ButtonHandle</a>(<font class="keywordtype">int</font> b)<font class="keyword"> 
</font>00302 <font class="keyword"></font>{
00303   <font class="keywordtype">int</font> i;
00304   list&lt;MSLVector&gt;::iterator fi;
00305   <font class="comment">//cout &lt;&lt; "Button " &lt;&lt; b &lt;&lt; "\n";</font>
00306 
00307   <font class="keywordflow">switch</font> (b) {
00308 
00309   <font class="keywordflow">case</font> 70: <font class="comment">// Play</font>
00310     <font class="keywordflow">if</font> (!AnimationActive) {
00311       <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00312       AnimationActive = <font class="keyword">true</font>;
00313     }
00314     <font class="keywordflow">break</font>;
00315   <font class="keywordflow">case</font> 71: <font class="comment">// Stop</font>
00316       AnimationActive = <font class="keyword">false</font>;
00317       AnimationFrameIndex = 0;
00318       LastFrameTime = 0.0;;
00319       <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00320     <font class="keywordflow">break</font>;
00321   <font class="keywordflow">case</font> 72: <font class="comment">// Pause</font>
00322     <font class="keywordflow">if</font> (AnimationActive) {
00323       AnimationActive = <font class="keyword">false</font>;
00324     }
00325     <font class="keywordflow">else</font> {
00326       AnimationActive = <font class="keyword">true</font>;
00327       <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00328     }
00329     cout &lt;&lt; <font class="stringliteral">"Frame: "</font> &lt;&lt; AnimationFrameIndex &lt;&lt; <font class="stringliteral">"   Time stamp: "</font> 
00330          &lt;&lt; AnimationFrameIndex*FrameTime &lt;&lt; <font class="stringliteral">"s\n"</font>;
00331     <font class="keywordflow">break</font>;
00332   <font class="keywordflow">case</font> 73: <font class="comment">// Deccelerate animation</font>
00333     AnimationTimeScale /= 1.41421356237; <font class="comment">// Two presses doubles the speed</font>
00334     <font class="keywordflow">break</font>;
00335   <font class="keywordflow">case</font> 74: <font class="comment">// Accelerate animation</font>
00336     AnimationTimeScale *= 1.41421356237; <font class="comment">// Two presses doubles the speed</font>
00337     <font class="keywordflow">break</font>;
00338   <font class="keywordflow">case</font> 75:
00339     <a class="code" href="class_Render.html#a7">Reset</a>();
00340     <font class="keywordflow">break</font>;
00341   <font class="keywordflow">case</font> 76: <font class="comment">// Prev frame</font>
00342     AnimationActive = <font class="keyword">false</font>;
00343     <font class="keywordflow">if</font> (AnimationFrameIndex &gt; 0)
00344       AnimationFrameIndex--;
00345     <font class="keywordflow">else</font>
00346       AnimationFrameIndex = FrameList.size() - 1;
00347     fi = FrameList.begin();
00348     <font class="keywordflow">for</font> (i = 0; i &lt; AnimationFrameIndex - 1; i++)
00349       fi++;
00350     CurrentAnimationFrame = *fi;
00351     <a class="code" href="class_Render.html#b1">ShowCurrentAnimationFrame</a>();
00352     cout &lt;&lt; <font class="stringliteral">"Frame: "</font> &lt;&lt; AnimationFrameIndex &lt;&lt; <font class="stringliteral">"   Time stamp: "</font> 
00353          &lt;&lt; AnimationFrameIndex*FrameTime &lt;&lt; <font class="stringliteral">"s\n"</font>;
00354    <font class="keywordflow">break</font>;
00355   <font class="keywordflow">case</font> 77: <font class="comment">// Next frame</font>
00356     AnimationActive = <font class="keyword">false</font>;
00357     <font class="keywordflow">if</font> (AnimationFrameIndex &lt; (<font class="keywordtype">int</font>) FrameList.size() - 1)
00358       AnimationFrameIndex++;
00359     <font class="keywordflow">else</font>
00360       AnimationFrameIndex = 0;
00361     fi = FrameList.begin();
00362     <font class="keywordflow">for</font> (i = 0; i &lt; AnimationFrameIndex - 1; i++)
00363       fi++;
00364     CurrentAnimationFrame = *fi;
00365     <a class="code" href="class_Render.html#b1">ShowCurrentAnimationFrame</a>();
00366     cout &lt;&lt; <font class="stringliteral">"Frame: "</font> &lt;&lt; AnimationFrameIndex &lt;&lt; <font class="stringliteral">"   Time stamp: "</font> 
00367          &lt;&lt; AnimationFrameIndex*FrameTime &lt;&lt; <font class="stringliteral">"s\n"</font>;
00368     <font class="keywordflow">break</font>;
00369   <font class="keywordflow">case</font> 80: cout &lt;&lt; <font class="stringliteral">"Toggle Show Path\n"</font>;
00370       ShowPathOn = !ShowPathOn; 
00371       <font class="keywordflow">break</font>;
00372   <font class="keywordflow">case</font> 81: cout &lt;&lt; <font class="stringliteral">"Toggle Attached Camera\n"</font>;
00373       AttachedCameraOn = !AttachedCameraOn; 
00374       <font class="keywordflow">break</font>;
00375   <font class="keywordflow">case</font> 82: cout &lt;&lt; <font class="stringliteral">"Toggle Multiple Views\n"</font>;
00376       MultipleViewsOn = !MultipleViewsOn; 
00377       <font class="keywordflow">break</font>;
00378   <font class="keywordflow">case</font> 83: cout &lt;&lt; <font class="stringliteral">"Toggle Bounding Box\n"</font>;
00379       BoundingBoxOn = !BoundingBoxOn; 
00380       <font class="keywordflow">break</font>;
00381   <font class="keywordflow">default</font>: cout &lt;&lt; <font class="stringliteral">"Option "</font> &lt;&lt; b &lt;&lt; <font class="stringliteral">" not implemented\n"</font>;
00382     <font class="keywordflow">break</font>;
00383   }
00384 }
00385 
00386 
<a name="l00387"></a><a class="code" href="class_Render.html#a6">00387</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a6">Render::MainLoop</a>(<a class="code" href="class_Gui.html">Gui</a> *g)<font class="keyword"> </font>{
00388 
00389   g-&gt;Finished = <font class="keyword">false</font>;
00390   <font class="keywordflow">while</font> (!g-&gt;Finished) {
00391     g-&gt;<a class="code" href="class_Gui.html#a3">HandleEvents</a>();
00392     <a class="code" href="class_Render.html#a5">HandleEvents</a>();
00393   }
00394 
00395 }
00396 
00397 
00398 
<a name="l00399"></a><a class="code" href="class_Render.html#a7">00399</a> <font class="keywordtype">void</font> <a class="code" href="class_Render.html#a7">Render::Reset</a>()<font class="keyword"> </font>{
00400   AnimationActive = <font class="keyword">false</font>;
00401   AnimationFrameIndex = 0;
00402   <font class="keywordflow">if</font> (FrameList.size() &gt; 0)
00403     CurrentAnimationFrame = FrameList.front();
00404   <font class="keywordflow">else</font>
00405     CurrentAnimationFrame = MSLVector(S-&gt;SceneConfigurationDim);
00406   AnimationTimeScale = 1.0;
00407   LastFrameTime = 0.0;
00408   <a class="code" href="util_C.html#a0">used_time</a>(LastFrameTime);
00409   <font class="comment">// Leave these next four alone because the GUI is not connected to them</font>
00410   <font class="comment">//AttachedCameraOn = false;</font>
00411   <font class="comment">//BoundingBoxOn = false;</font>
00412   <font class="comment">//MultipleViewsOn = false;</font>
00413   <font class="comment">//ShowPathOn = false;</font>
00414   AmbientLight = 0.2;
00415 }
00416 
00417 
00418 <font class="comment">/*
</font>00419 <font class="comment">void Render::ToggleRenderCtlWindow() 
</font>00420 <font class="comment">{
</font>00421 <font class="comment">  char *play,*stop,*pause,*rw,*ff,*prev,*next;
</font>00422 <font class="comment">  RenderCtlWindowOn = !RenderCtlWindowOn;
</font>00423 <font class="comment">  if (RenderCtlWindowOn) {
</font>00424 <font class="comment">    RenderCtlWindow = new window(200,155,"MSL: Render Control Window");
</font>00425 <font class="comment">    RenderCtlWindow-&gt;set_icon_pixrect(RenderCtlWindow-&gt;create_pixrect(msl_xpm));
</font>00426 <font class="comment">    RenderCtlWindow-&gt;double_item("AnimationTimeScale",AnimationTimeScale);
</font>00427 <font class="comment">    RenderCtlWindow-&gt;double_item("AmbientLight",AmbientLight);
</font>00428 <font class="comment">    RenderCtlWindow-&gt;bool_item("BoundingBox",BoundingBoxOn);
</font>00429 <font class="comment">    RenderCtlWindow-&gt;bool_item("MultipleViews",MultipleViewsOn);
</font>00430 <font class="comment">    RenderCtlWindow-&gt;bool_item("AttachedCamera",AttachedCameraOn);
</font>00431 <font class="comment">    RenderCtlWindow-&gt;bool_item("ShowPath",ShowPathOn);
</font>00432 <font class="comment">    
</font>00433 <font class="comment">    // Make the animation buttons
</font>00434 <font class="comment">    play = RenderCtlWindow-&gt;create_pixrect(play_xpm);
</font>00435 <font class="comment">    stop = RenderCtlWindow-&gt;create_pixrect(stop_xpm);
</font>00436 <font class="comment">    pause = RenderCtlWindow-&gt;create_pixrect(pause_xpm);
</font>00437 <font class="comment">    rw = RenderCtlWindow-&gt;create_pixrect(rw_xpm);
</font>00438 <font class="comment">    ff = RenderCtlWindow-&gt;create_pixrect(ff_xpm);
</font>00439 <font class="comment">    prev = RenderCtlWindow-&gt;create_pixrect(prev_xpm);
</font>00440 <font class="comment">    next = RenderCtlWindow-&gt;create_pixrect(next_xpm);
</font>00441 <font class="comment">    RenderCtlWindow-&gt;buttons_per_line(7);
</font>00442 <font class="comment">    RenderCtlWindow-&gt;button(stop,stop,"",71);
</font>00443 <font class="comment">    RenderCtlWindow-&gt;button(prev,prev,"",76);
</font>00444 <font class="comment">    RenderCtlWindow-&gt;button(pause,pause,"",72);
</font>00445 <font class="comment">    RenderCtlWindow-&gt;button(next,next,"",77);
</font>00446 <font class="comment">    RenderCtlWindow-&gt;button(rw,rw,"",73);
</font>00447 <font class="comment">    RenderCtlWindow-&gt;button(play,play,"",70);
</font>00448 <font class="comment">    RenderCtlWindow-&gt;button(ff,ff,"",74);
</font>00449 <font class="comment">
</font>00450 <font class="comment">    RenderCtlWindow-&gt;button("Reset",75);
</font>00451 <font class="comment">
</font>00452 <font class="comment">    RenderCtlWindow-&gt;display();
</font>00453 <font class="comment">  }
</font>00454 <font class="comment">  else {
</font>00455 <font class="comment">    RenderCtlWindow-&gt;close();
</font>00456 <font class="comment">  }
</font>00457 <font class="comment">}
</font>00458 <font class="comment">*/</font>
00459 
00460 
00461 
00462 
00463 
</div></pre><HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<p>

<hr>

Web page maintained by 
<a href="http://janowiec.cs.iastate.edu/~lavalle">Steve LaValle</a><br>

Partial support provided by NSF CAREER Award IRI-970228 (LaValle),
Honda Research, and Iowa State University.<br>

Contributors:  Anna Atramentov, Peng Cheng, James Kuffner, Steve LaValle, and Libo Yang.<br>
