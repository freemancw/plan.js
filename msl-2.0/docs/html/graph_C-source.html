<HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<body bgcolor="#ffffff">

<center><img src="msl.jpg"></center>

<p>


<!-- Generated by Doxygen 1.2.2 on Wed Aug 29 23:26:43 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>graph.C</h1><a href="graph_C.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------</font>
00002 <font class="comment">//               The Motion Strategy Library (MSL)</font>
00003 <font class="comment">//----------------------------------------------------------------------</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Copyright (c) 1998-2000 Iowa State University and Steve LaValle.  </font>
00006 <font class="comment">// All Rights Reserved.</font>
00007 <font class="comment">// </font>
00008 <font class="comment">// Permission to use, copy, and distribute this software and its </font>
00009 <font class="comment">// documentation is hereby granted free of charge, provided that </font>
00010 <font class="comment">// (1) it is not a component of a commercial product, and </font>
00011 <font class="comment">// (2) this notice appears in all copies of the software and</font>
00012 <font class="comment">//     related documentation. </font>
00013 <font class="comment">// </font>
00014 <font class="comment">// Iowa State University and the author make no representations</font>
00015 <font class="comment">// about the suitability or fitness of this software for any purpose.  </font>
00016 <font class="comment">// It is provided "as is" without express or implied warranty.</font>
00017 <font class="comment">//----------------------------------------------------------------------</font>
00018 
00019 
00020 <font class="preprocessor">#include "<a class="code" href="graph_h.html">graph.h</a>"</font>
00021 
00022 <font class="comment">// *********************************************************************</font>
00023 <font class="comment">// *********************************************************************</font>
00024 <font class="comment">// CLASS:     MSLVertex class</font>
00025 <font class="comment">// </font>
00026 <font class="comment">// *********************************************************************</font>
00027 <font class="comment">// *********************************************************************</font>
00028 
<a name="l00029"></a><a class="code" href="graph_C.html#a0">00029</a> ostream&amp; <a class="code" href="vector_C.html#a5">operator&lt;&lt;</a>(ostream&amp; out, <font class="keyword">const</font> <a class="code" href="class_MSLVertex.html">MSLVertex</a>&amp; n)<font class="keyword">
</font>00030 <font class="keyword"></font>{
00031   out &lt;&lt; n.id &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; n.state;
00032   out &lt;&lt; <font class="stringliteral">"\n"</font>;
00033 
00034   <font class="keywordflow">return</font> out;
00035 }
00036 
00037 
<a name="l00038"></a><a class="code" href="graph_C.html#a1">00038</a> ostream&amp; operator&lt;&lt;(ostream&amp; out, const list&lt;MSLVertex*&gt;&amp; L)
00039 {
00040   list&lt;MSLVertex*&gt;::iterator x; 
00041   list&lt;MSLVertex*&gt; vl;
00042   vl = L;
00043   <font class="keywordflow">for</font> (x = vl.begin(); x != vl.end(); x++) 
00044     out &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; **x;
00045   <font class="keywordflow">return</font> out;
00046 }
00047 
00048 
<a name="l00049"></a><a class="code" href="graph_C.html#a2">00049</a> istream&amp; <a class="code" href="vector_C.html#a6">operator&gt;&gt;</a>(istream&amp; in, list&lt;MSLVertex*&gt;&amp; L)<font class="keyword">
</font>00050 <font class="keyword"></font>{ 
00051   L.clear();
00052   <font class="comment">//  MSLVertex *x;</font>
00053   <font class="keywordflow">for</font>(;;)
00054     { 
00055       <font class="keywordtype">char</font> c;
00056       <font class="keywordflow">while</font> (in.get(c) &amp;&amp; isspace(c));
00057       <font class="keywordflow">if</font> (!in) <font class="keywordflow">break</font>;
00058       in.putback(c);
00059       <font class="comment">//  x = new MSLVertex(); in &gt;&gt; x; L.push_back(x);</font>
00060     }
00061   <font class="keywordflow">return</font> in;
00062 }
00063 
00064 
<a name="l00065"></a><a class="code" href="class_MSLVertex.html#a9">00065</a> <a class="code" href="class_MSLVertex.html#a9">MSLVertex::MSLVertex</a>()<font class="keyword"> </font>{ 
00066 }
00067 
00068 
<a name="l00069"></a><a class="code" href="class_MSLVertex.html#a10">00069</a> <a class="code" href="class_MSLVertex.html#a9">MSLVertex::MSLVertex</a>(<font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x)<font class="keyword"> </font>{
00070   state = x;
00071   cost = 0.0;
00072 }
00073 
00074 
<a name="l00075"></a><a class="code" href="class_MSLVertex.html#a11">00075</a> <a class="code" href="class_MSLVertex.html#a11">MSLVertex::~MSLVertex</a>()<font class="keyword"> </font>{ 
00076   edges.clear();
00077 }
00078 
00079 
00080 <font class="comment">// *********************************************************************</font>
00081 <font class="comment">// *********************************************************************</font>
00082 <font class="comment">// CLASS:     MSLEdge class</font>
00083 <font class="comment">// </font>
00084 <font class="comment">// *********************************************************************</font>
00085 <font class="comment">// *********************************************************************</font>
00086 
<a name="l00087"></a><a class="code" href="graph_C.html#a3">00087</a> ostream&amp; <a class="code" href="vector_C.html#a5">operator&lt;&lt;</a>(ostream&amp; out, <font class="keyword">const</font> <a class="code" href="class_MSLEdge.html">MSLEdge</a>&amp; e)<font class="keyword">
</font>00088 <font class="keyword"></font>{
00089   out &lt;&lt; e.source-&gt;ID() &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; e.target-&gt;ID();
00090   out &lt;&lt; <font class="stringliteral">"\n"</font>;
00091 
00092   <font class="keywordflow">return</font> out;
00093 }
00094 
00095 
<a name="l00096"></a><a class="code" href="graph_C.html#a4">00096</a> ostream&amp; operator&lt;&lt;(ostream&amp; out, const list&lt;MSLEdge*&gt;&amp; L)
00097 {
00098   list&lt;MSLEdge*&gt;::iterator x; 
00099   list&lt;MSLEdge*&gt; vl;
00100   vl = L;
00101   <font class="keywordflow">for</font> (x = vl.begin(); x != vl.end(); x++) 
00102     out &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; **x;
00103   <font class="keywordflow">return</font> out;
00104 }
00105 
00106 
00107 
<a name="l00108"></a><a class="code" href="class_MSLEdge.html#a0">00108</a> <a class="code" href="class_MSLEdge.html#a0">MSLEdge::MSLEdge</a>()<font class="keyword"> </font>{ 
00109 }
00110 
00111 
<a name="l00112"></a><a class="code" href="class_MSLEdge.html#a3">00112</a> <a class="code" href="class_MSLEdge.html#a0">MSLEdge::MSLEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2)<font class="keyword"> </font>{
00113   <font class="comment">// Make sure the node edge lists point correctly</font>
00114   v1-&gt;edges.push_back(<font class="keyword">this</font>);
00115   v2-&gt;edges.push_back(<font class="keyword">this</font>);
00116   
00117   source = v1; target = v2;
00118   time = 1.0; cost = 1.0;
00119 }
00120 
00121 
<a name="l00122"></a><a class="code" href="class_MSLEdge.html#a1">00122</a> <a class="code" href="class_MSLEdge.html#a0">MSLEdge::MSLEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;u, 
00123                  <font class="keywordtype">double</font> t)<font class="keyword"> </font>{
00124   v1-&gt;edges.push_back(<font class="keyword">this</font>);
00125   v2-&gt;edges.push_back(<font class="keyword">this</font>);
00126   
00127   source = v1; target = v2;
00128   input = u; time = t; cost = 1.0;
00129 }
00130 
00131 
00132 
<a name="l00133"></a><a class="code" href="class_MSLEdge.html#a2">00133</a> <a class="code" href="class_MSLEdge.html#a0">MSLEdge::MSLEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2, <font class="keywordtype">double</font> t)<font class="keyword"> </font>{
00134   v1-&gt;edges.push_back(<font class="keyword">this</font>);
00135   v2-&gt;edges.push_back(<font class="keyword">this</font>);
00136   
00137   source = v1; target = v2;
00138   time = t; cost = 1.0;
00139 }
00140 
00141 
00142 <font class="comment">// *********************************************************************</font>
00143 <font class="comment">// *********************************************************************</font>
00144 <font class="comment">// CLASS:     MSLGraph class</font>
00145 <font class="comment">// </font>
00146 <font class="comment">// *********************************************************************</font>
00147 <font class="comment">// *********************************************************************</font>
00148 
<a name="l00149"></a><a class="code" href="graph_C.html#a5">00149</a> ostream&amp; <a class="code" href="vector_C.html#a5">operator&lt;&lt; </a>(ostream&amp; os, <font class="keyword">const</font> <a class="code" href="class_MSLGraph.html">MSLGraph</a>&amp; G)<font class="keyword"> </font>{
00150   os &lt;&lt; G.numvertices &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; G.numedges &lt;&lt; <font class="stringliteral">"\n"</font>;
00151   list&lt;MSLVertex*&gt;::iterator x;
00152   list&lt;MSLVertex*&gt; vl;
00153   vl = G.vertices;
00154   <font class="keywordflow">for</font> (x = vl.begin(); x != vl.end(); x++) 
00155     os &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; **x;
00156 
00157   os &lt;&lt; <font class="stringliteral">"\n"</font>;
00158   list&lt;MSLEdge*&gt;::iterator y;
00159   list&lt;MSLEdge*&gt; el;
00160   el = G.edges;
00161   <font class="keywordflow">for</font> (y = el.begin(); y != el.end(); y++) 
00162     os &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; **y;
00163   os &lt;&lt; <font class="stringliteral">"\n\n"</font>;
00164 
00165   <font class="keywordflow">return</font> os;
00166 }
00167 
00168 
<a name="l00169"></a><a class="code" href="graph_C.html#a6">00169</a> istream&amp; <a class="code" href="vector_C.html#a6">operator&gt;&gt; </a>(istream&amp; is, <a class="code" href="class_MSLGraph.html">MSLGraph</a> &amp; G)<font class="keyword"> </font>{
00170   <font class="keywordtype">int</font> i,nid1,nid2,nume,numv;
00171   <a class="code" href="class_MSLVector.html">MSLVector</a> x,u;
00172   <a class="code" href="class_MSLVertex.html">MSLVertex</a> *v1,*v2;
00173 
00174   G.<a class="code" href="class_MSLGraph.html#a13">Clear</a>();
00175 
00176   is &gt;&gt; numv &gt;&gt; nume;
00177   cout &lt;&lt; <font class="stringliteral">"Loading a graph that has "</font> &lt;&lt; numv 
00178        &lt;&lt; <font class="stringliteral">" vertices and "</font> &lt;&lt; nume &lt;&lt; <font class="stringliteral">" edges\n"</font>;
00179 
00180   <font class="comment">// Handle vertices</font>
00181   <font class="keywordflow">for</font> (i = 0; i &lt; numv; i++) {
00182     is &gt;&gt; nid1 &gt;&gt; x;
00183     v1 = G.<a class="code" href="class_MSLGraph.html#a2">AddVertex</a>(x);
00184     v1-&gt;<a class="code" href="class_MSLVertex.html#a4">SetID</a>(nid1);
00185   }
00186   
00187   <font class="comment">// Handle edges</font>
00188   <font class="keywordflow">for</font> (i = 0; i &lt; nume; i++) {
00189     is &gt;&gt; nid1 &gt;&gt; nid2;
00190     v1 = G.<a class="code" href="class_MSLGraph.html#a7">FindVertex</a>(nid1);
00191     v2 = G.<a class="code" href="class_MSLGraph.html#a7">FindVertex</a>(nid2);
00192     <font class="keywordflow">if</font> (v1 &amp;&amp; v2)
00193       G.<a class="code" href="class_MSLGraph.html#a3">AddEdge</a>(v1,v2);
00194     <font class="keywordflow">else</font>
00195       cout &lt;&lt; <font class="stringliteral">"ERROR:  Read edge does not connect to vertices\n"</font>;
00196   }
00197 
00198   <font class="keywordflow">return</font> is; 
00199 }
00200 
00201 
<a name="l00202"></a><a class="code" href="class_MSLGraph.html#a0">00202</a> <a class="code" href="class_MSLGraph.html#a0">MSLGraph::MSLGraph</a>()<font class="keyword"> </font>{ 
00203   numvertices = 0;
00204   numedges = 0;
00205 }
00206 
00207 
00208 
<a name="l00209"></a><a class="code" href="class_MSLGraph.html#a1">00209</a> <a class="code" href="class_MSLGraph.html#a1">MSLGraph::~MSLGraph</a>()<font class="keyword"> </font>{
00210   <a class="code" href="class_MSLGraph.html#a13">Clear</a>();
00211 }
00212 
00213 
<a name="l00214"></a><a class="code" href="class_MSLGraph.html#a2">00214</a> <a class="code" href="class_MSLVertex.html">MSLVertex</a>* <a class="code" href="class_MSLGraph.html#a2">MSLGraph::AddVertex</a>(<font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x)<font class="keyword"> </font>{
00215   <a class="code" href="class_MSLVertex.html">MSLVertex</a> *nv;
00216 
00217   nv = <font class="keyword">new</font> MSLVertex(x);
00218   nv-&gt;id = numvertices;
00219   vertices.push_back(nv);
00220   numvertices++;
00221 
00222   <font class="keywordflow">return</font> nv;
00223 }
00224 
00225 
<a name="l00226"></a><a class="code" href="class_MSLGraph.html#a3">00226</a> <a class="code" href="class_MSLEdge.html">MSLEdge</a>* <a class="code" href="class_MSLGraph.html#a3">MSLGraph::AddEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2)<font class="keyword"> </font>{
00227   <a class="code" href="class_MSLVector.html">MSLVector</a> u;
00228   <font class="keywordflow">return</font> <a class="code" href="class_MSLGraph.html#a3">AddEdge</a>(v1,v2,u,1.0);
00229 }
00230 
00231 
<a name="l00232"></a><a class="code" href="class_MSLGraph.html#a4">00232</a> <a class="code" href="class_MSLEdge.html">MSLEdge</a>* <a class="code" href="class_MSLGraph.html#a3">MSLGraph::AddEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2, <font class="keywordtype">double</font> time)<font class="keyword"> </font>{
00233   <a class="code" href="class_MSLVector.html">MSLVector</a> u;
00234   <font class="keywordflow">return</font> <a class="code" href="class_MSLGraph.html#a3">AddEdge</a>(v1,v2,u,time);
00235 }
00236 
00237 
<a name="l00238"></a><a class="code" href="class_MSLGraph.html#a5">00238</a> <a class="code" href="class_MSLEdge.html">MSLEdge</a>* <a class="code" href="class_MSLGraph.html#a3">MSLGraph::AddEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2, 
00239                            <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;u, <font class="keywordtype">double</font> time)<font class="keyword"> </font>{
00240 
00241   <a class="code" href="class_MSLEdge.html">MSLEdge</a>* e;
00242   e = <font class="keyword">new</font> MSLEdge(v1,v2,u,time);
00243 
00244   edges.push_back(e);
00245   numedges++;
00246 
00247   <font class="keywordflow">return</font> e;
00248 }
00249 
00250 
<a name="l00251"></a><a class="code" href="class_MSLGraph.html#a6">00251</a> <font class="keywordtype">bool</font> <a class="code" href="class_MSLGraph.html#a6">MSLGraph::IsEdge</a>(<a class="code" href="class_MSLVertex.html">MSLVertex</a>* v1, <a class="code" href="class_MSLVertex.html">MSLVertex</a>* v2)<font class="keyword"> </font>{
00252 
00253   list&lt;MSLEdge*&gt; elist;
00254   elist = v1-&gt;<a class="code" href="class_MSLVertex.html#a1">Edges</a>();
00255 
00256   list&lt;MSLEdge*&gt;::iterator e; 
00257   <font class="keywordflow">for</font> (e = elist.begin(); e != elist.end(); e++) {
00258     <font class="keywordflow">if</font> ((*e)-&gt;<a class="code" href="class_MSLEdge.html#a10">Target</a>() == v2)
00259       <font class="keywordflow">return</font> <font class="keyword">true</font>;
00260   }
00261 
00262   <font class="keywordflow">return</font> <font class="keyword">false</font>;
00263 }
00264 
00265 
00266 
<a name="l00267"></a><a class="code" href="class_MSLGraph.html#a7">00267</a> <a class="code" href="class_MSLVertex.html">MSLVertex</a>* <a class="code" href="class_MSLGraph.html#a7">MSLGraph::FindVertex</a>(<font class="keywordtype">int</font> nid)<font class="keyword"> </font>{
00268   list&lt;MSLVertex*&gt;::iterator vi;
00269 
00270   <font class="keywordflow">for</font>(vi =  vertices.begin(); vi != vertices.end(); vi++) {
00271     <font class="keywordflow">if</font> ((*vi)-&gt;id == nid)
00272       <font class="keywordflow">return</font> *vi;
00273   }
00274 
00275   <font class="keywordflow">return</font> NULL; <font class="comment">// Indicates failure</font>
00276 }
00277 
00278 
00279 
<a name="l00280"></a><a class="code" href="class_MSLGraph.html#a13">00280</a> <font class="keywordtype">void</font> <a class="code" href="class_MSLGraph.html#a13">MSLGraph::Clear</a>()<font class="keyword"> </font>{
00281   list&lt;MSLVertex*&gt;::iterator v; 
00282   <font class="keywordflow">for</font> (v = vertices.begin(); v != vertices.end(); v++)
00283     <font class="keyword">delete</font> *v;
00284   vertices.clear();
00285 
00286   list&lt;MSLEdge*&gt;::iterator e; 
00287   <font class="keywordflow">for</font> (e = edges.begin(); e != edges.end(); e++)
00288     <font class="keyword">delete</font> *e;
00289   edges.clear();
00290 }
</div></pre><HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<p>

<hr>

Web page maintained by 
<a href="http://janowiec.cs.iastate.edu/~lavalle">Steve LaValle</a><br>

Partial support provided by NSF CAREER Award IRI-970228 (LaValle),
Honda Research, and Iowa State University.<br>

Contributors:  Anna Atramentov, Peng Cheng, James Kuffner, Steve LaValle, and Libo Yang.<br>
