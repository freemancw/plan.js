<HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<body bgcolor="#ffffff">

<center><img src="msl.jpg"></center>

<p>


<!-- Generated by Doxygen 1.2.2 on Wed Aug 29 23:26:45 2001 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>tree.C</h1><a href="tree_C.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------</font>
00002 <font class="comment">//               The Motion Strategy Library (MSL)</font>
00003 <font class="comment">//----------------------------------------------------------------------</font>
00004 <font class="comment">//</font>
00005 <font class="comment">// Copyright (c) 1998-2000 Iowa State University and Steve LaValle.  </font>
00006 <font class="comment">// All Rights Reserved.</font>
00007 <font class="comment">// </font>
00008 <font class="comment">// Permission to use, copy, and distribute this software and its </font>
00009 <font class="comment">// documentation is hereby granted free of charge, provided that </font>
00010 <font class="comment">// (1) it is not a component of a commercial product, and </font>
00011 <font class="comment">// (2) this notice appears in all copies of the software and</font>
00012 <font class="comment">//     related documentation. </font>
00013 <font class="comment">// </font>
00014 <font class="comment">// Iowa State University and the author make no representations</font>
00015 <font class="comment">// about the suitability or fitness of this software for any purpose.  </font>
00016 <font class="comment">// It is provided "as is" without express or implied warranty.</font>
00017 <font class="comment">//----------------------------------------------------------------------</font>
00018 
00019 
00020 <font class="preprocessor">#include "<a class="code" href="tree_h.html">tree.h</a>"</font>
00021 
00022 <font class="comment">// *********************************************************************</font>
00023 <font class="comment">// *********************************************************************</font>
00024 <font class="comment">// CLASS:     MSLNode class</font>
00025 <font class="comment">// </font>
00026 <font class="comment">// *********************************************************************</font>
00027 <font class="comment">// *********************************************************************</font>
00028 
<a name="l00029"></a><a class="code" href="tree_C.html#a0">00029</a> ostream&amp; <a class="code" href="vector_C.html#a5">operator&lt;&lt;</a>(ostream&amp; out, <font class="keyword">const</font> <a class="code" href="class_MSLNode.html">MSLNode</a>&amp; n)<font class="keyword">
</font>00030 <font class="keyword"></font>{
00031   out &lt;&lt; n.id;
00032   <font class="keywordflow">if</font> (n.parent) 
00033     out &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; n.parent-&gt;id;
00034   <font class="keywordflow">else</font>
00035     out &lt;&lt; <font class="stringliteral">" -1"</font>;
00036   out &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; n.state &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; n.input;
00037   out &lt;&lt; <font class="stringliteral">"\n"</font>;
00038 
00039   <font class="keywordflow">return</font> out;
00040 }
00041 
00042 
<a name="l00043"></a><a class="code" href="tree_C.html#a1">00043</a> ostream&amp; operator&lt;&lt;(ostream&amp; out, const list&lt;MSLNode*&gt;&amp; L)
00044 {
00045   list&lt;MSLNode*&gt;::iterator x; 
00046   list&lt;MSLNode*&gt; vl;
00047   vl = L;
00048   <font class="keywordflow">for</font> (x = vl.begin(); x != vl.end(); x++) 
00049     out &lt;&lt; <font class="stringliteral">" "</font> &lt;&lt; **x;
00050   <font class="keywordflow">return</font> out;
00051 }
00052 
00053 
00054 
00055 
<a name="l00056"></a><a class="code" href="class_MSLNode.html#a9">00056</a> <a class="code" href="class_MSLNode.html#a9">MSLNode::MSLNode</a>()<font class="keyword"> </font>{ 
00057 }
00058 
00059 
<a name="l00060"></a><a class="code" href="class_MSLNode.html#a10">00060</a> <a class="code" href="class_MSLNode.html#a9">MSLNode::MSLNode</a>(<a class="code" href="class_MSLNode.html">MSLNode</a> *pn, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;u)<font class="keyword"> </font>{
00061   state = x;
00062   input = u;
00063   parent = pn;
00064   time = 1.0; <font class="comment">// Make up a default</font>
00065   cost = 0.0;
00066 }
00067 
00068 
<a name="l00069"></a><a class="code" href="class_MSLNode.html#a11">00069</a> <a class="code" href="class_MSLNode.html#a9">MSLNode::MSLNode</a>(<a class="code" href="class_MSLNode.html">MSLNode</a> *pn, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;u, <font class="keywordtype">double</font> t)<font class="keyword"> </font>{
00070   state = x;
00071   input = u;
00072   parent = pn;
00073   time = t;
00074   cost = 0.0;
00075 }
00076 
00077 
00078 
00079 <font class="comment">// *********************************************************************</font>
00080 <font class="comment">// *********************************************************************</font>
00081 <font class="comment">// CLASS:     MSLTree class</font>
00082 <font class="comment">// </font>
00083 <font class="comment">// *********************************************************************</font>
00084 <font class="comment">// *********************************************************************</font>
00085 
00086 
<a name="l00087"></a><a class="code" href="tree_C.html#a2">00087</a> ostream&amp; <a class="code" href="vector_C.html#a5">operator&lt;&lt; </a>(ostream&amp; os, <font class="keyword">const</font> <a class="code" href="class_MSLTree.html">MSLTree</a>&amp; T)<font class="keyword"> </font>{
00088   list&lt;MSLNode*&gt;::iterator x;
00089   list&lt;MSLNode*&gt; vl;
00090   vl = T.nodes;
00091   os &lt;&lt; T.size &lt;&lt; <font class="stringliteral">"\n"</font>;
00092   <font class="keywordflow">for</font> (x = vl.begin(); x != vl.end(); x++) 
00093     os &lt;&lt; **x;
00094   <font class="keywordflow">return</font> os;
00095 }
00096 
00097 
00098 
<a name="l00099"></a><a class="code" href="tree_C.html#a3">00099</a> istream&amp; <a class="code" href="vector_C.html#a6">operator&gt;&gt; </a>(istream&amp; is, <a class="code" href="class_MSLTree.html">MSLTree</a> &amp; T)<font class="keyword"> </font>{
00100   <font class="keywordtype">int</font> i,nid,pid,tsize;
00101   <a class="code" href="class_MSLVector.html">MSLVector</a> x,u;
00102   <a class="code" href="class_MSLNode.html">MSLNode</a> *pnode,*n; <font class="comment">// Parent node</font>
00103 
00104   T.<a class="code" href="class_MSLTree.html#a11">Clear</a>();
00105 
00106   is &gt;&gt; tsize;
00107   cout &lt;&lt; <font class="stringliteral">"Loading a tree that has "</font> &lt;&lt; tsize &lt;&lt; <font class="stringliteral">" nodes\n"</font>;
00108   <font class="keywordflow">for</font> (i = 0; i &lt; tsize; i++) {
00109     is &gt;&gt; nid &gt;&gt; pid &gt;&gt; x &gt;&gt; u;
00110     pnode = T.<a class="code" href="class_MSLTree.html#a7">FindNode</a>(pid);
00111     <font class="keywordflow">if</font> (pnode) {
00112       n = T.<a class="code" href="class_MSLTree.html#a4">Extend</a>(pnode,x,u);
00113       n-&gt;<a class="code" href="class_MSLNode.html#a7">SetID</a>(nid);
00114     }
00115     <font class="keywordflow">else</font>
00116       T.<a class="code" href="class_MSLTree.html#a3">MakeRoot</a>(x);
00117   }
00118 
00119   <font class="keywordflow">return</font> is; 
00120 }
00121 
00122 
<a name="l00123"></a><a class="code" href="class_MSLTree.html#a0">00123</a> <a class="code" href="class_MSLTree.html#a0">MSLTree::MSLTree</a>()<font class="keyword"> </font>{ 
00124   root = NULL;
00125   size = 0;
00126 }
00127 
00128 
<a name="l00129"></a><a class="code" href="class_MSLTree.html#a1">00129</a> <a class="code" href="class_MSLTree.html#a0">MSLTree::MSLTree</a>(<font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x)<font class="keyword"> </font>{ 
00130   <a class="code" href="class_MSLVector.html">MSLVector</a> u;
00131 
00132   root = <font class="keyword">new</font> MSLNode(NULL,x,u,0.0);
00133   root-&gt;id = 0;
00134   nodes.push_back(root);
00135   size = 1;
00136 }
00137 
00138 
<a name="l00139"></a><a class="code" href="class_MSLTree.html#a2">00139</a> <a class="code" href="class_MSLTree.html#a2">MSLTree::~MSLTree</a>()<font class="keyword"> </font>{
00140   <a class="code" href="class_MSLTree.html#a11">Clear</a>();
00141 }
00142 
00143 
<a name="l00144"></a><a class="code" href="class_MSLTree.html#a3">00144</a> <font class="keywordtype">void</font> <a class="code" href="class_MSLTree.html#a3">MSLTree::MakeRoot</a>(<font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x)<font class="keyword"> </font>{
00145   <a class="code" href="class_MSLVector.html">MSLVector</a> u;
00146   
00147   <font class="keywordflow">if</font> (!root) {
00148     root = <font class="keyword">new</font> MSLNode(NULL,x,u,0.0);
00149     root-&gt;id = 0;
00150     nodes.push_back(root);
00151   }
00152   <font class="keywordflow">else</font>
00153     cout &lt;&lt; <font class="stringliteral">"Root already made.  MakeRoot has no effect.\n"</font>;
00154   size = 1;
00155 }
00156 
00157 
<a name="l00158"></a><a class="code" href="class_MSLTree.html#a4">00158</a> <a class="code" href="class_MSLNode.html">MSLNode</a>* <a class="code" href="class_MSLTree.html#a4">MSLTree::Extend</a>(<a class="code" href="class_MSLNode.html">MSLNode</a> *parent, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;u)<font class="keyword"> </font>{
00159   <a class="code" href="class_MSLNode.html">MSLNode</a> *nn;
00160 
00161   nn = <font class="keyword">new</font> MSLNode(parent, x, u);
00162   nn-&gt;id = size;
00163   nodes.push_back(nn);
00164   size++;
00165 
00166   <font class="keywordflow">return</font> nn;
00167 }
00168 
00169 
00170 
<a name="l00171"></a><a class="code" href="class_MSLTree.html#a5">00171</a> <a class="code" href="class_MSLNode.html">MSLNode</a>* <a class="code" href="class_MSLTree.html#a4">MSLTree::Extend</a>(<a class="code" href="class_MSLNode.html">MSLNode</a> *parent, <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;x, 
00172                          <font class="keyword">const</font> <a class="code" href="class_MSLVector.html">MSLVector</a> &amp;u,
00173                          <font class="keywordtype">double</font> time)<font class="keyword"> </font>{
00174   <a class="code" href="class_MSLNode.html">MSLNode</a> *nn;
00175 
00176   nn = <font class="keyword">new</font> MSLNode(parent, x, u, time);
00177   nn-&gt;id = size;
00178   nodes.push_back(nn);
00179   size++;
00180 
00181   <font class="keywordflow">return</font> nn;
00182 }
00183 
00184 
00185 
<a name="l00186"></a><a class="code" href="class_MSLTree.html#a7">00186</a> <a class="code" href="class_MSLNode.html">MSLNode</a>* <a class="code" href="class_MSLTree.html#a7">MSLTree::FindNode</a>(<font class="keywordtype">int</font> nid)<font class="keyword"> </font>{
00187   list&lt;MSLNode*&gt;::iterator ni;
00188 
00189   <font class="keywordflow">for</font>(ni = nodes.begin(); ni != nodes.end(); ni++) {
00190     <font class="keywordflow">if</font> ((*ni)-&gt;id == nid)
00191       <font class="keywordflow">return</font> *ni;
00192   }
00193 
00194   <font class="keywordflow">return</font> NULL; <font class="comment">// Indicates failure</font>
00195 }
00196 
00197 
00198 
<a name="l00199"></a><a class="code" href="class_MSLTree.html#a6">00199</a> list&lt;MSLNode*&gt; <a class="code" href="class_MSLTree.html#a6">MSLTree::PathToRoot</a>(<a class="code" href="class_MSLNode.html">MSLNode</a> *n)<font class="keyword"> </font>{
00200   list&lt;MSLNode*&gt; nl;
00201   <a class="code" href="class_MSLNode.html">MSLNode</a> *ni;
00202   
00203   ni = n;
00204   <font class="keywordflow">while</font> (ni != root) {
00205     nl.push_back(ni);
00206     ni = ni-&gt;<a class="code" href="class_MSLNode.html#a2">Parent</a>();
00207   }
00208 
00209   nl.push_back(root);
00210  
00211   <font class="keywordflow">return</font> nl;
00212 }
00213 
00214 
<a name="l00215"></a><a class="code" href="class_MSLTree.html#a11">00215</a> <font class="keywordtype">void</font> <a class="code" href="class_MSLTree.html#a11">MSLTree::Clear</a>()<font class="keyword"> </font>{
00216   list&lt;MSLNode*&gt;::iterator n; 
00217   <font class="keywordflow">for</font> (n = nodes.begin(); n != nodes.end(); n++)
00218     <font class="keyword">delete</font> *n;
00219   nodes.clear();
00220   root = NULL;
00221 }
</div></pre><HEAD>
<TITLE>Motion Strategy Library</TITLE>
</HEAD>

<p>

<hr>

Web page maintained by 
<a href="http://janowiec.cs.iastate.edu/~lavalle">Steve LaValle</a><br>

Partial support provided by NSF CAREER Award IRI-970228 (LaValle),
Honda Research, and Iowa State University.<br>

Contributors:  Anna Atramentov, Peng Cheng, James Kuffner, Steve LaValle, and Libo Yang.<br>
